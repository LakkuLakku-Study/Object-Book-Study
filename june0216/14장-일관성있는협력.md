- ê°ì²´ëŠ” í˜‘ë ¥ì„ ìœ„í•´ ì¡´ì¬í•œë‹¤.
- í˜‘ë ¥ì€ ê°ì²´ê°€ ì¡´ì¬í•˜ëŠ” ì´ìœ ì™€ ë¬¸ë§¥ì„ ì œê³µ
- ê°ì²´ ì§€í–¥ ì„¤ê³„ ëª©í‘œ
    - ì ì ˆí•œ ì±…ì„ì„ ìˆ˜í–‰í•˜ëŠ” ê°ì²´ì¦ì˜ í˜‘ë ¥ì„ ê¸°ë°˜ìœ¼ë¡œ
        - ê²°í•©ë„ê°€ ë‚®ê³  + ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ì½”ë“œ êµ¬ì¡°ë¥¼ ì°½ì¡°
- ê°ì²´ë“¤ì˜ í˜‘ë ¥ êµ¬ì¡°ê°€ ì„œë¡œ ë‹¤ë¥¸ ê²½ìš° â†’ ê°œë°œí•˜ë©´ì„œ ìš”êµ¬ì‚¬í•­ì„ ë°˜ë³µì ìœ¼ë¡œ ì¶”ê°€í•˜ê±°ë‚˜ ìˆ˜ì •í•˜ê²Œ ë˜ëŠ” ê²½ìš°ê°€ ë§ì€ë° ì´ë•Œ,  ì½”ë“œ ì´í•´ ì–´ë µê³  ë²„ê·¸ ë°œìƒ ìœ„í—˜
    - â†’ ì „ì²´ì ì¸ ì„¤ê³„ì˜ ì¼ê´€ì„± ë–¨ì–´ì§
- ê°ì²´ ì§€í–¥ì˜ íŒ¨ëŸ¬ë‹¤ì„ì— ë”°ë¼ ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ì„¤ê³„ë¡œ 1) ìœ ì‚¬í•œ ê¸°ëŠ¥ì„ ì¶”ê°€ì ìœ¼ë¡œ êµ¬í˜„í•˜ëŠ” ë° ì‹œê°„ê³¼ ë…¸ë ¥ì„ ì¤„ì¼ ìˆ˜ ìˆë‹¤. + 2) ì´í•´í•˜ê¸° ì‰¬ìš´ ì½”ë“œ ì‘ì„± ê°€ëŠ¥
    - ì¬ì‚¬ìš©ì„ ìœ„í•´ **â€œê°ì²´ë“¤ì˜ í˜‘ë ¥ ë°©ì‹ì„ ì¼ê´€ì„± ìˆê²Œâ€** ë§Œë“¤ì–´ì•¼ í•œë‹¤.
- ê°€ëŠ¥í•œ ìœ ì‚¬í•œ ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ê¸° ìœ„í•´ â€œìœ ì‚¬í•œ í˜‘ë ¥ íŒ¨í„´ì„ ì‚¬ìš©â€í•˜ë¼
    - ê°ì²´ë“¤ì˜ í˜‘ë ¥ì´ ì „ì²´ì ìœ¼ë¡œ ì¼ê´€ì„± ìˆëŠ” ìœ ì‚¬í•œ íŒ¨í„´ì„ ë”°ë¥¸ë‹¤ë©´, ì‹œìŠ¤í…œì„ ì´í•´í•˜ê³  í™•ì¥í•˜ê¸° ìœ„í•´ ìš”êµ¬ë˜ëŠ” ì •ì‹ ì ì¸ ë¶€ë‹´ì„ í¬ê²Œ ì¤„ì¼ ìˆ˜ ìˆë‹¤.

# (1) í•¸ë“œí° ê³¼ê¸ˆ ì‹œìŠ¤í…œ ë³€ê²½í•˜ê¸°

## ê¸°ë³¸ ì •ì±… í™•ì¥

- ì›ë˜ ê¸°ë³¸ ì •ì±…
    - (1) ì¼ë°˜ ìš”ê¸ˆì œ
    - (2) ì‹¬ì•¼ í• ì¸ ìš”ê¸ˆì œ
- ì¶”ê°€ëœ ê¸°ë³¸ ì •ì±…
    
    ![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/e2c6ccd4-4439-43db-96e9-e654aaf4aa71/a99ca1b1-f9cd-4146-bf61-fe0e797b49eb/image.png)
    
    - ê³ ì •ìš”ê¸ˆ ë°©ì‹
        - ì¼ì • ì‹œê°„ ë‹¨ìœŒë¡œ ë™ì¼í•œ ìš”ê¸ˆì„ ë¶€ê³¼í•˜ëŠ” ë°©ì‹ì´ë‹¤.
        - ëª¨ë“  í†µí™”ì— ëŒ€í•´ ë™ì¼í•˜ê²Œ 10ì´ˆë‹¹ 9ì›ì„ ë¶€ê³¼í•˜ëŠ” ë°©ì‹ì´ ê³ ì •ìš”ê¸ˆ ë°”ìµì˜ ì˜ˆì— í•´ë‹¹í•œë‹¤. ê¸°ì¡´ì˜ 'ì¼ë°˜ ìš”ê¸ˆì œ'ì™€ ë™ì¼í•˜ë‹¤.
    - ì‹œê°„ëŒ€ë³„ ë°©ì‹
        - í•˜ë£¨ 24ì‹œê°„ì„ ì‹œê°„ êµ¬ê°„ìœ¼ë¡œ ë‚˜ëˆˆ í›„ ê° êµ¬ê°„ë³„ë¡œ ì„œë¡œ ë‹¤ë¥¸ ìš”ê¸ˆì„ ë¶€ê³¼í•˜ëŠ” ë°©ì‹
    - ìš”ì¼ë³„ ë°©ì‹
        - ìš”ì¼ë³„ë¡œ ìš”ê¸ˆì„ ì°¨ë“± ë¶€ê³¼í•˜ëŠ” ë°©ì‹
    - êµ¬ê°„ë³„ ë°©ì‹
        - ì „ì²´ í†µí™” ì‹œê°„ì„ ì¼ì •í•œ í†µí™” ì‹œê°„ì— ë”°ë¼ ë‚˜ëˆ„ê³  ê° êµ¬ê°„ë³„ë¡œ ìš”ê¸ˆì„ ì°¨ë“± ë¶€ê³¼í•˜ëŠ” ë°©ì‹
        - ì˜ˆë¥¼ ë“¤ì–´, ì´ˆê¸° 1ë¶„ + ê·¸ ì´í›„ ì‹œê°„ìœ¼ë¡œ ë‚˜ëˆ„ê¸° â†’ ì´ˆê¸°ì—” 10ì´ˆë‹¹ 50ì›, ê·¸ ì´í›„ ì‹œê°„ì—ëŠ” 10ì´ˆë‹¹ 20ì› ë¶€ê³¼
- ì¡°í•© ê°€ëŠ¥í•œ ëª¨ë“  ìš”ê¸ˆ ê³„ì‚° ìˆœì„œ
    
    ![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-12-04 á„‹á…©á„’á…® 9.43.19.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/e2c6ccd4-4439-43db-96e9-e654aaf4aa71/a9d39da9-df40-4f93-be38-a9b59af7b2e9/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2024-12-04_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_9.43.19.png)
    
- ìƒˆë¡­ê²Œ êµ¬í˜„í•  í´ë˜ìŠ¤ êµ¬ì¡°
    
    ![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/e2c6ccd4-4439-43db-96e9-e654aaf4aa71/fe19bdc4-4e8d-4037-92dc-b7c979f903e4/image.png)
    

## ê³ ì • ìš”ê¸ˆ ë°©ì‹ êµ¬í˜„í•˜ê¸°

- ê³ ì • ìš”ê¸ˆ ë°©ì‹ì€ ê¸°ì¡´ì˜ ì¼ë°˜ìš”ê¸ˆì œì™€ ë™ì¼í•˜ë¯€ë¡œ ê¸°ì¡´ RegularPolicy í´ë˜ìŠ¤ ì´ë¦„ì„ FixedFeePolicyë¡œ ìˆ˜ì •í•˜ë©´ ëœë‹¤.
    
    ```java
    public class FixedFeePolicy extends BasicRatePolicy {
        private Money amount;
        private Duration seconds;
    
        public FixedFeePolicy(Money amount, Duration seconds) {
            this.amount = amount;
            this.seconds = seconds;
        }
    
        @Override
        protected Money calculateCallFee(Call call) {
            return amount.times(call.getDuration().getSeconds() / seconds.getSeconds());
        }
    }
    ```
    

## ì‹œê°„ëŒ€ë³„ ë°©ì‹ êµ¬í˜„í•˜ê¸°

- í†µí™” ê¸°ê°„ì„ ì •í•´ì§„ ì‹œê°„ëŒ€ë³„ë¡œ ë‚˜ëˆˆ í›„ ê° ì‹œê°„ëŒ€ë³„ë¡œ ì„œë¡œ ë‹¤ë¥¸ ê³„ì‚° ê·œì¹™ì„ ì ìš©í•´ì•¼í•œë‹¤.
- ê³ ë ¤í•´ì•¼í•  ì¡°ê±´
    
    ![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/e2c6ccd4-4439-43db-96e9-e654aaf4aa71/9377a6c8-40bb-4fb4-8706-c84fdb60b28e/image.png)
    
    - í†µí™”ê°€ ì—¬ëŸ¬ ë‚  ì— ê±¸ì³ì„œ ì´ë¤„ì§ˆ ìˆ˜ ìˆìœ¼ë¯€ë¡œ ë‹¨ìˆœíˆ ì‹œì‘ ì‹œê°„ê³¼ ì¢…ë£Œ ì‹œê°„ë§Œ ì €ì¥í•´ë†“ê³  ìˆì–´ì•¼ í•˜ëŠ” ê²Œ ì•„ë‹ˆë¼ ì‹œì‘ ì¼ìì™€ ì¢…ë£Œ ì¼ìë„ í•¨ê»˜ ê³ ë ¤í•´ì•¼í•œë‹¤.
- ê¸°ê°„ì„ ê°„í¸í•˜ê²Œ ê´€ë¦¬í•˜ëŠ” DateTimeInterval í´ë˜ìŠ¤ ì¶”ê°€í•˜ì
    
    ```java
    public class DateTimeInterval {
        private LocalDateTime from; // ì‹œì‘ ì‹œê°„ 
        private LocalDateTime to; // ì¢…ë£Œ ì‹œê°„ 
    
        public static DateTimeInterval of(LocalDateTime from, LocalDateTime to) {
            return new DateTimeInterval(from, to);
        }
    
        public static DateTimeInterval toMidnight(LocalDateTime from) {
            return new DateTimeInterval(from, LocalDateTime.of(from.toLocalDate(), LocalTime.of(23, 59, 59, 999_999_999)));
        }
    
        public static DateTimeInterval fromMidnight(LocalDateTime to) {
            return new DateTimeInterval(LocalDateTime.of(to.toLocalDate(), LocalTime.of(0, 0)), to);
        }
    
        public static DateTimeInterval during(LocalDate date) {
            return new DateTimeInterval(
                    LocalDateTime.of(date, LocalTime.of(0, 0)),
                    LocalDateTime.of(date, LocalTime.of(23, 59, 59, 999_999_999)));
        }
    
        private DateTimeInterval(LocalDateTime from, LocalDateTime to) {
            this.from = from;
            this.to = to;
        }
    
        public Duration duration() {
            return Duration.between(from, to);
        }
    
        public LocalDateTime getFrom() {
            return from;
        }
    
        public LocalDateTime getTo() {
            return to;
        }
       }
    ```
    
- Call í´ë˜ìŠ¤
    
    ```java
    public class Call {
    // from, to ì‹œê°„ í•œ ë²ˆì— ê´€ë¦¬
    	private DateTimeInterval interval;
    
    	public Call(LocalDateTime from, LocalDateTime to) {
    		this.interval = DateTimeInterval.of(from, to);
    	}
    
    	public Duration getDuration() {
    		return interval.duration();
    	}
    
    	public LocalDateTime getFrom() {
    		return interval.getFrom();
    	}
    
    	public LocalDateTime getTo() {
    		return interval.getTo();
    	}
    
    	public DateTimeInterval getInterval() {
    		return interval;
    	}
    
    	public List<DateTimeInterval> splitByDay() {
    		return interval.splitByDay();
    	}
    }
    ```
    
- ë¡œì§
    - (1) í†µí™” ê¸°ê°„ì„ ì¼ìë³„ë¡œ ë¶„ë¦¬í•œë‹¤.
    - (2) ì¼ìë³„ë¡œ ë¶„ë¦¬ëœ ê¸°ê°„ì„ ë‹¤ì‹œ ì‹œê°„ëŒ€ë³„ ê·œì¹™ì— ë”°ë¼ ë¶„ë¦¬í•œ í›„ ê° ê¸°ê°„ì— ëŒ€í•´ ìš”ê¸ˆì„ ê³„ì‚°
- ì±…ì„ í• ë‹¹
    - ì±…ì„ í• ë‹¹ == í•„ìš”í•œ ì •ë³´ë¥¼ ê°€ì¥ ì˜ ì•Œê³  ìˆëŠ” ì •ë³´ ì „ë¬¸ê°€ì—ê²Œ í• ë‹¹í•˜ê¸°
    
    > **(1) í†µí™” ê¸°ê°„ì„ ì¼ì ë‹¨ìœ„ë¡œ ë‚˜ëˆ„ëŠ” ì‘ì—…ì˜ ì •ë³´ ì „ë¬¸ê°€**
    > 
    > - â†’ í†µí™” ê¸°ê°„ì— ëŒ€í•œ ì •ë³´ë¥¼ ê°€ì¥ ì˜ ì•Œê³  ìˆëŠ” ê°ì²´ **`â€œCallâ€`**
    >     - í•˜ì§€ë§Œ callì€ í†µí™” ê¸°ê°„ì€ ì˜ ì•Œì§€ë§Œ, ê¸°ê°„ ìì²´ë¥¼ ì²˜ë¦¬í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ì„œëŠ” ì „ë¬¸ê°€ê°€ ì•„ë‹ˆë‹¤.
    > - ê¸°ê°„ì„ ì²˜ë¦¬í•˜ëŠ” ë°©ë²•ì— ëŒ€í•œ ì „ë¬¸ê°€ â†’ **`â€œDateTimeIntervalâ€`**
    > 
    > <aside>
    > ğŸ”„
    > 
    > â‡’ í†µí™” ê¸°ê°„ì„ ì¼ì ë‹¨ìœ„ë¡œ ë‚˜ëˆ„ëŠ” ì±…ì„ì€ â‡’**`â€œDateTimeIntervalâ€` ì—ê²Œ í• ë‹¹** 
    > 
    > **`â€œCallâ€`ì´ `â€œDateTimeIntervalâ€` ì—ê²Œ ë¶„í• ì„ ìš”ì²­í•˜ë„ë¡ í˜‘ë ¥ ì„¤ê³„** 
    > 
    > </aside>
    > 
    
    > **(2) ì‹œê°„ëŒ€ë³„ë¡œ ë¶„í• í•˜ëŠ” ì‘ì—…ì˜ ì •ë³´ ì „ë¬¸ê°€**
    > 
    > - ìš”ê¸ˆ ì •ì±… **`â€œTimeOfDiscountPolicyâ€`**
    
- **`TimeOfDiscountPolicy` -> `Call`->  `DateTimeInterval` í˜‘ë ¥ ê´€ê³„**
    
    ![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-12-04 á„‹á…©á„’á…® 10.13.19.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/e2c6ccd4-4439-43db-96e9-e654aaf4aa71/9f118f48-707b-4539-9f4a-e4b2c1fa2443/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2024-12-04_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_10.13.19.png)
    
    - (1) **`TimeOfDiscountPolicy`**ì´ í†µí™” ê¸°ê°„ì„ ì˜ ì•Œê³  ìˆëŠ” **`â€œCallâ€`**ì—ê²Œ ì¼ìë³„ë¡œ í†µí™” ê¸°ê°„ì„ ë¶„ë¦¬í•  ê²ƒì„ ìš”ì²­
    - (2) **`Call`**ì€ ì´ ìš”ì²­ì„ **`DateTimeInterval`**ì—ê²Œ ìœ„ì„í•œë‹¤.
    - (3) **`DateTimeInterval`**ì€ ì¼ì ë‹¨ìœ„ë¡œ ë¶„í• í•œ í›„ ë¶„í• ëœ ëª©ë¡ì„ ë°˜í™˜
    - (4) **`TimeOfDiscountPolicy`** ëŠ” ì¼ìë³„ ê¸°ê°„ ëª©ë¡ì„ ëŒ€ìƒìœ¼ë¡œ ë£¨í”„ë¥¼ ëŒë¦¬ë©´ì„œ ê° ì‹œê°„ëŒ€ë³„ ê¸°ì¤€ì— ë§ëŠ” ì‹œì‘ì‹œê°„ (from)ê³¼ ì¢…ë£Œ ì‹œê°„(to)ë¥¼ ì–»ëŠ”ë‹¤.
- **ë¶„í•  ê³¼ì • ì˜ˆì‹œ**
    
    ```java
    - í†µí™” ê¸°ê°„ : 1ì›” 1ì¼ 10ì‹œ ~ 1ì›” 3ì¼ 15ì‹œê¹Œì§€ 2ì¼ì— ê±¸ì³ í†µí™” 
    - ìš”ê¸ˆì œ : 19~24ì‹œ â‡’ 10ì´ˆë‹¹ 15ì›, 0~19ì‹œ â‡’ 10ì´ˆë‹¹ 18ì›
    ```
    
    - **(1) `Call`ì€ `DateTimeInterval`** íƒ€ì…ì˜ ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ì¸ **`interval`**ì—ê²Œ **`splitByDay() ë©”ì„œë“œ` í˜¸ì¶œ**
        - ë°˜í™˜ê°’ : **â€œ1ì›” 1ì¼ 10ì‹œ ~24ì‹œ â€œ** , **â€œ 1ì›” 2ì¼ 0ì‹œ ~ 24ì‹œâ€** , **â€œ1ì›” 3ì¼ 0ì‹œ ~ 15ì‹œâ€** 3ê°œì˜ DateTimeInterval ì¸ìŠ¤í„´ìŠ¤ë¥¼ í¬í•¨í•˜ëŠ” Listë¥¼ ë°˜í™˜
            
            ![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-12-04 á„‹á…©á„’á…® 10.25.27.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/e2c6ccd4-4439-43db-96e9-e654aaf4aa71/6185c152-3bbc-48e3-9b70-2dc56b1a5623/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2024-12-04_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_10.25.27.png)
            
    - (2) ì´ë ‡ê²Œ ë°˜í™˜ëœ Listë¥¼ ì‹œê°„ëŒ€ë³„ ë°©ì‹ì„ ì ìš©í•˜ê¸° ìœ„í•´ **`TimeOfDiscountPolicy` í´ë˜ìŠ¤ì—ê²Œ ë°˜í™˜í•œë‹¤.**
        - **`DateTimeInterval` ì¸ìŠ¤í„´ìŠ¤ë“¤ì„ ìš”ê¸ˆ ì •ì±…ì— ì •ì˜ëœ ê° ì‹œê°„ëŒ€ë³„ë¡œ ë¶„í• í•œ í›„ ìš”ê¸ˆì„ ë¶„í• í•œë‹¤.**
            - ì•„ë˜ì™€ ê°™ì´ 5ê°œë¡œ ë¶„í• í•  ìˆ˜ ìˆë‹¤.
            
            ![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-12-05 á„‹á…©á„’á…® 2.50.06(2).png](https://prod-files-secure.s3.us-west-2.amazonaws.com/e2c6ccd4-4439-43db-96e9-e654aaf4aa71/7192be40-36e0-46ab-a6e9-96f0daedcbb5/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2024-12-05_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_2.50.06(2).png)
            
- ë¡œì§ì„ ë°˜ì˜í•˜ì—¬ **`TimeOfDiscountPolicy`  êµ¬í˜„**
    - ì‹œê°„ì— ë”°ë¼ ì„œë¡œ ë‹¤ë¥¸ ìš”ê¸ˆ ê·œì¹™ì„ ì •í•˜ëŠ” ê²ƒ
    - í•˜ë‚˜ì˜ í†µí™” ì‹œê°„ëŒ€ë¥¼ êµ¬ì„±í•˜ëŠ” ìš”ì†Œ
        - ì‹œì‘ ì‹œê°„, ì¢…ë£Œ ì‹œê°„, ë‹¨ìœ„ ì‹œê°„, ë‹¨ìœ„ ìš”ê¸ˆ
        - ex) 0ì‹œ, 19ì‹œ, 10ì´ˆ, 18ì›
    - ì´ ìš”ì†Œë“¤ì´ ì—¬ëŸ¬ ê°œ â†’ Listë¡œ ê´€ë¦¬, í•˜ë‚˜ì˜ ì„¸íŠ¸ê°€ ë™ì¼í•œ ì¸ë±ìŠ¤ì— ìœ„ì¹˜í•˜ê²Œ ë˜ë„ë¡
    
    ```java
    public class TimeOfDayDiscountPolicy extends BasicRatePolicy {
        private List<LocalTime> starts = new Arraylist<>();
        private List<LocalTime> ends = new ArrayList<>();
        private List<Duration> durations = new ArrayList<>();
        private List<Money> amounts = new ArrayList<>();
    }
    ```
    
    - ì „ì²´ ì½”ë“œ
        
        ```java
        public class TimeOfDayDiscountPolicy extends BasicRatePolicy {
            private List<LocalTime> starts = new ArrayList<LocalTime>();
            private List<LocalTime> ends = new ArrayList<LocalTime>();
            private List<Duration> durations = new ArrayList<Duration>();
            private List<Money>  amounts = new ArrayList<Money>();
        
            @Override
            protected Money calculateCallFee(Call call) {
                Money result = Money.ZERO;
                for(DateTimeInterval interval : call.splitByDay()) {
                    for(int loop=0; loop < starts.size(); loop++) {
                        result.plus(amounts.get(loop).times(Duration.between(from(interval, starts.get(loop)),
                                to(interval, ends.get(loop))).getSeconds() / durations.get(loop).getSeconds()));
                    }
                }
                return result;
            }
        
            private LocalTime from(DateTimeInterval interval, LocalTime from) {
                return interval.getFrom().toLocalTime().isBefore(from) ? from : interval.getFrom().toLocalTime();
            }
        
            private LocalTime to(DateTimeInterval interval, LocalTime to) {
                return interval.getTo().toLocalTime().isAfter(to) ? to : interval.getTo().toLocalTime();
            }
        }
        ```
        
- **`Call`**ì€ ìš”ì²­ì„ **`DateTimeInterval`**ì—ê²Œ ìœ„í•˜ëŠ” ë©”ì„œë“œì¸ splitByDay
    
    ```java
    public class Call{
    		public List<DateTimeInterval> splitByDay() {
    		return interval.splitByDay();
    	}
    }
    ```
    
- **`DateTimeInterval`** ì˜ splitByDay ë©”ì„œë“œë¡œ í†µí™” ê¸°ê°„ì„ ì¼ìë³„ë¡œ ë¶„í• í•˜ì—¬ ë°˜í™˜
    
    ```java
     public class DateTimeInterval {
    	 
    	
        public List<DateTimeInterval> splitByDay() {
            if (days() > 0) { // ì—¬ëŸ¬ ë‚ ì— ê±¸ì³ ìˆë‹¤ë©´
                return split(days()); // ë‚ ì§œ ìˆ˜ ë§Œí¼ ë¶„ë¦¬í•œë‹¤. 
            }
    
            return Arrays.asList(this);
        }
    
    // ë‚ ì§œ ìˆ˜ ë°˜í™˜
        private long days() {
            return Duration.between(from.toLocalDate().atStartOfDay(), to.toLocalDate().atStartOfDay()).toDays();
        }
    
    // ë‚ ì§œ ìˆ˜ ë§Œí¼ ë¶„ë¦¬ 
        private List<DateTimeInterval> split(long days) {
            List<DateTimeInterval> result = new ArrayList<>();
            addFirstDay(result);
            addMiddleDays(result, days);
            addLastDay(result);
            return result;
        }
    
        private void addFirstDay(List<DateTimeInterval> result) {
            result.add(DateTimeInterval.toMidnight(from));
        }
    
        private void addMiddleDays(List<DateTimeInterval> result, long days) {
            for(int loop=1; loop < days; loop++) {
                result.add(DateTimeInterval.during(from.toLocalDate().plusDays(loop)));
            }
        }
    
        private void addLastDay(List<DateTimeInterval> result) {
            result.add(DateTimeInterval.fromMidnight(to));
        }
    
        public String toString() {
            return "[ " + from + " - " + to + " ]";
        }
    }
    ```
    

## ìš”ì¼ë³„ ë°©ì‹ êµ¬í˜„í•˜ê¸°

- ê·œì¹™ êµ¬ì„± 3ê°€ì§€ ìš”ì†Œ
    - ìš”ì¼ì˜ ëª©ë¡, ë‹¨ìœ„ ì‹œê°„, ë‹¨ìœ„ ìš”ê¸ˆ
    - ex) ì›”ìš”ì¼ì€ 10ì´ˆë‹¹ 38ì›
    - ì‹œê°„ë³„ ë°©ì‹ì€ ì´ ìš”ì†Œë“¤ì„ Listí˜•íƒœë¡œ ê´€ë¦¬í–ˆì§€ë§Œ ê·œì¹™ì„ í´ë˜ìŠ¤ë¡œ êµ¬í˜„í•˜ì—¬ ì„¤ê³„í–ˆë‹¤.
    
    ```java
    public class DayOfWeekDiscountRule {
    		// ìš”ì¼ ëª©ë¡ 
        private List<DayOfWeek> dayOfWeeks = new ArrayList<>();
        // ë‹¨ìœ„ ì‹œê°„
        private Duration duration = Duration.ZERO;
        // ë‹¨ìœ„ ìš”ê¸ˆ
        private Money amount = Money.ZERO;
    
        public DayOfWeekDiscountRule(List<DayOfWeek> dayOfWeeks,
                                     Duration duration, Money  amount) {
            this.dayOfWeeks = dayOfWeeks;
            this.duration = duration;
            this.amount = amount;
        }
    
     // ìš”ì¼ ì¡°ê±´ì„ ë§Œì¡±í•˜ë©´ ë‹¨ìœ„ ì‹œê°„ê³¼ ë‹¨ìœ„ ìš”ê¸ˆì„ ì´ìš©í•´ í†µí™” ìš”ê¸ˆì„ ê³„ì‚°í•œë‹¤. 
        public Money calculate(DateTimeInterval interval) {
            if (dayOfWeeks.contains(interval.getFrom().getDayOfWeek())) {
                return amount.times(interval.duration().getSeconds() / duration.getSeconds());
            }
    
            return Money.ZERO;
        }
    }
    ```
    
- ê³ ë ¤í•  ì¡°ê±´
    - í†µí™” ê¸°ê°„ì´ ì—¬ëŸ¬ ë‚  ê±¸ì³ ìˆì„ ìˆ˜ ìˆìŒ
        - â‡’ í†µí™” ê¸°ê°„ì„ ë‚ ì§œ ê²½ê³„ë¡œ ë¶„ë¦¬í•˜ê³  ë¶„ë¦¬ëœ ê° í†µí™” ê¸°ê°„ì„ ìš”ì¼ë³„ë¡œ ì„¤ì •ëœ ìš”ê¸ˆ ì •ì±…ì— ë”°ë¼ ì ì ˆí•˜ê²Œ ê³„ì‚°
        
        ```java
        public class DayOfWeekDiscountPolicy extends BasicRatePolicy {
            private List<DayOfWeekDiscountRule> rules = new ArrayList<>();
        
            public DayOfWeekDiscountPolicy(List<DayOfWeekDiscountRule> rules) {
                this.rules = rules;
            }
        
            @Override
            protected Money calculateCallFee(Call call) {
                Money result = Money.ZERO;
                for(DateTimeInterval interval : call.getInterval().splitByDay()) {
                    for(DayOfWeekDiscountRule rule: rules) { result.plus(rule.calculate(interval));
                    }
                }
                return result;
            }
        }
        ```
        

## êµ¬ê°„ë³„ ë°©ì‹ êµ¬í˜„í•˜ê¸°

- ì§€ê¸ˆê¹Œì§€ ìœ„ì—ì„œ êµ¬í˜„í•œ ê³ ì •ìš”ê¸ˆ ë°©ì‹, ì‹œê°„ëŒ€ë³„ ë°©ì‹, ìš”ì¼ë³„ ë°©ì‹ì„ í•¨ê»˜ ëª¨ì•„ë³´ë©´ ë¬¸ì œì ì´ ìˆë‹¤.
    - â‡’ â€œìœ ì‚¬í•œ ë¬¸ì œ(=ê¸°ë³¸ ì •ì±…ì„ êµ¬í˜„í•œë‹¤ëŠ” ê³µí†µì˜ ëª©ì  ê³µìœ )ë¥¼ í•´ê²°í•˜ê³  ìˆìŒì—ë„ ì¼ê´€ì„±ì´ ë–¨ì–´ì§„ë‹¤â€
    - ì¦‰, ê°œë…ì ìœ¼ë¡œëŠ” ì—°ê´€ë¼ ìˆì§€ë§Œ êµ¬í˜„ ë°©ì‹ì— ìˆì–´ì„œëŠ” ì™„ì „íˆ ì œê°ê°ì´ë‹¤.
- ë¹„ì¼ê´€ì„±ì´ë¼ëŠ” ë¬¸ì œì ìœ¼ë¡œ ì¸í•œ 2ê°€ì§€ ìƒí™©ì—ì„œì˜ ë¬¸ì œ
    - **(1) ìƒˆë¡œìš´ êµ¬í˜„ì„ ì¶”ê°€í•´ì•¼í•˜ëŠ” ìƒí™©**
        - êµ¬ê°„ë³„ ë°©ì‹ì„ ì¶”ê°€í•´ì•¼í•  ê²½ìš°
            - 1) ìš°ì„  BasicRatePolicyë¥¼ ìƒì†ë°›ëŠ” DurationDiscountPolicy í´ë˜ìŠ¤ë¥¼ ì¶”ê°€í•  ê²ƒì´ì´ë‹¤.
                - ê·¸ë¦¬ê³  calculateCallFee ë©”ì„œë“œ ì˜¤ë²„ë¼ì´ë”©ì„ í•˜ê³  ë‚´ë¶€ë¥¼ ì±„ìš¸ ê²ƒì´ë‹¤.
            - 2)ì—¬ëŸ¬ ê°œì˜ ê·œì¹™ì„ êµ¬ì„±í•˜ëŠ” ë°©ë²•ì„ ê²°ì •í•´ì•¼í•œë‹¤.
                - êµ¬ê°„ë³„ ë°©ì‹ì€ ì „ì²´ í†µí™” ì‹œê°„ì„ ì¼ì •í•œ ì‹œê°„ ê°„ê²©ìœ¼ë¡œ ë¶„í• í•œ í›„ ë¶„í• ëœ êµ¬ê°„ë³„ë¡œ ê·œì¹™ì„ ë‹¤ë¥´ê²Œ ë¶€ê³¼í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤.
                - í•˜ì§€ë§Œ ì•ì—ì„œ êµ¬í˜„í•œ ì½”ë“œì— ì˜í•˜ë©´ ìš”êµ¬ì‚¬í•­ ê´€ì ì—ì„œ ì—¬ëŸ¬ ê°œì˜ ê·œì¹™ì„ ì‚¬ìš©í•œë‹¤ëŠ” ê³µí†µì ì´ ìˆì§€ë§Œ, ê·œì¹™ì„ êµ¬í˜„í•˜ëŠ” ë°©ì‹ì´ ì™„ì „íˆ ë‹¤ë¥´ë‹¤.
                    - ì‹œê°„ëŒ€ë³„ ë°©ì‹ â†’ ê·œì¹™ì„ êµ¬ì„±í•˜ëŠ” 4ê°€ì§€ ìš”ì†Œë“¤ì„ â€œListâ€ì— ë‹´ì•„ ê´€ë¦¬í–ˆë‹¤.
                    - ìš”ì¼ë³„ ë°©ì‹ â†’ ë³„ë„ì˜ í´ë˜ìŠ¤ DayOfWeekDiscountRuleë¥¼ ë§Œë“¤ì–´ ê´€ë¦¬í–ˆë‹¤.
                    - ê³ ì • ìš”ê¸ˆ ë°©ì‹ â†’ ì˜¤ì§ í•˜ë‚˜ì˜ ê·œì¹™ë§Œìœ¼ë¡œ êµ¬ì„±
                - êµ¬í˜„ ë°©ì‹ì´ ë‹¬ë¼ ìƒˆë¡œ ìš”ê¸ˆ ë°©ì‹ì„ ì¶”ê°€í•  ë•Œ 3ê°€ì§€ ë‹¤ë¥¸ êµ¬í˜„ ë°©ë²• ì¤‘ ì–´ë–¤ ê±¸ ì„ íƒí•´ì•¼í• ì§€ ê³ ë¯¼í•´ì•¼í•œë‹¤. â†’ ì¼ê´€ì„±ì€ ì ì  ì–´ê¸‹ë‚œë‹¤.
    - **(2) ê¸°ì¡´ì˜ êµ¬í˜„ì„ ì´í•´í•˜ëŠ” ìƒí™©**
        - ìš”ì¼ë³„ ë°©ì‹ì˜ êµ¬í˜„ì„ ì´í•´í•˜ë©´ ì‹œê°„ëŒ€ë³„ ë°©ì‹ì„ ì´í•´í•˜ê¸° ì‰¬ìš´ê°€? â†’ ì•„ë‹ˆë‹¤.
        - ìœ ì‚¬í•œ ìš”êµ¬ì‚¬í•­ì´ ì„œë¡œ ë‹¤ë¥¸ ë°©ì‹ìœ¼ë¡œ êµ¬í˜„ë¼ ìˆê¸° ë•Œë¬¸ì— ì½”ë“œë¥¼ ì˜ˆìƒí•˜ê¸° ì–´ë ¤ìš°ë©° ì‹¬ì§€ì–´ ìš”êµ¬ì‚¬í•­ì´ ìœ ì‚¬í•˜ë‹¤ëŠ” ìì²´ë„ ì˜ì‹¬í•˜ê²Œ ë  ê²ƒì´ë‹¤.
        - â†’ ìœ ì‚¬í•œ ê¸°ëŠ¥ì€ ìœ ì‚¬í•œ ë°©ì‹ìœ¼ë¡œ êµ¬í˜„í•˜ì
            - ê°ì²´ ì§€í–¥ì—ì„œ ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ëŠ” ìœ ì¼í•œ ë°©ë²•ì€ â€œê°ì²´ ì‚¬ì´ì˜ í˜‘ë ¥ì„ ë§Œë“œëŠ” ê²ƒâ€ â†’ í˜‘ë ¥ì„ ì¼ê´€ì„± ìˆê²Œ ë§Œë“œëŠ” ê²ƒ
    - 
    
- êµ¬ê°„ë³„ ë°©ì‹ì„ ì–´ë–»ê²Œ êµ¬í˜„?
    - ê¸°ì¡´ ë°©ë²•ê³¼ëŠ” ë‹¤ë¥¸ ìƒˆë¡œìš´ ë°©ë²•ìœ¼ë¡œ êµ¬í˜„í•˜ê¸°ë¡œ í–ˆë‹¤ê³  ê°€ì •í•˜ì
    - ê·œì¹™
        - ìš”ì¼ë³„ ë°©ì‹ ì²˜ëŸ¼ ê·œì¹™ì„ ì •ì˜í•˜ëŠ” ìƒˆë¡œìš´ í´ë˜ìŠ¤ë¥¼ ì¶”ê°€
        - í•˜ì§€ë§Œ ìš”ì¼ë³„ ë°©ì‹ê³¼ ë‹¤ë¥¸ ì ì€ â†’ ì½”ë“œë¥¼ ì¬ì‚¬ìš©í•˜ê¸° ìœ„í•´ FixedFeePolicyë¥¼ ìƒì†í•œë‹¤ëŠ” ê²ƒì´ë‹¤.
            - ì´ ë°©ì‹ì—ëŠ” ë¬¸ì œê°€ ìˆë‹¤. ë‹¨ìˆœíˆ ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ë¥¼ ì¬ì‚¬ìš©í•˜ê¸° ìœ„í•´ ìƒì†ì„ ì‚¬ìš©í–ˆë‹¤ëŠ” ê²ƒì´ë‹¤.
        
        ```java
        public class DurationDiscountRule extends FixedFeePolicy {
            private Duration from;
            private Duration to;
        
            public DurationDiscountRule(Duration from, Duration to, Money amount, Duration seconds) {
                super(amount, seconds);
                this.from = from;
                this.to = to;
            }
        
        // ë¶€ëª¨ í´ë˜ìŠ¤ì˜ calculateFee ë©”ì„œë“œë¥¼ í˜¸ì¶œ
            public Money calculate(Call call) {
                if (call.getDuration().compareTo(to) > 0) {
                    return Money.ZERO;
                }
        
                if (call.getDuration().compareTo(from) < 0) {
                    return Money.ZERO;
                }
        
                // ë¶€ëª¨ í´ë˜ìŠ¤ì˜ calculateFee(phone)ì€ Phone í´ë˜ìŠ¤ë¥¼ íŒŒë¼ë¯¸í„°ë¡œ ë°›ëŠ”ë‹¤.
                // calculateFee(phone)ì„ ì¬ì‚¬ìš©í•˜ê¸° ìœ„í•´ 
                // ë°ì´í„°ë¥¼ ì „ë‹¬í•  ìš©ë„ë¡œ ì„ì‹œ Phoneì„ ë§Œë“ ë‹¤.
                Phone phone = new Phone(null);
                phone.call(new Call(call.getFrom().plus(from),
                                    call.getDuration().compareTo(to) > 0 ? call.getFrom().plus(to) : call.getTo()));
        
                return super.calculateFee(phone);
            }
        }
        ```
        
    - êµ¬ê°„ë³„ ë°©ì‹ ìš”ê¸ˆì œ
        
        ```java
        public class DurationDiscountPolicy extends BasicRatePolicy {
            private List<DurationDiscountRule> rules = new ArrayList<>();
        
            public DurationDiscountPolicy(List<DurationDiscountRule> rules) {
                this.rules = rules;
            }
        
            @Override
            protected Money calculateCallFee(Call call) {
                Money result = Money.ZERO;
                for(DurationDiscountRule rule: rules) {
                    result.plus(rule.calculate(call));
                }
                return result;
            }
        }
        ```
        
        - í• ì¸ ìš”ê¸ˆì„ ì •ìƒì ìœ¼ë¡œ ê³„ì‚°í•˜ê³  ê° í´ë˜ìŠ¤ëŠ” í•˜ë‚˜ì˜ ì±…ì„ë§Œì„ ìˆ˜í–‰í•œë‹¤.
        - ë¬¸ì œì 
            - ê¸°ë³¸ ì •ì±…ì„ êµ¬í˜„í•˜ëŠ” ê¸°ì¡´ í´ë˜ìŠ¤ë“¤ê³¼ ì¼ê´€ì„±ì´ ì—†ë‹¤.
            - â†’ ê·¸ë ‡ê¸° ë•Œë¬¸ì— ìƒˆë¡œìš´ ê¸°ë³¸ ì •ì±…ì„ êµ¬í˜„í•˜ëŠ” ìƒí™©ì—ì„œ ë˜ ë‹¤ë¥¸  ë°©ì‹ìœ¼ë¡œ êµ¬í˜„í•  ê°€ëŠ¥ì„±ì´ ìˆê³  ì´ëŸ¬ë©´ ì¼ê´€ì„±ì´ ë”ìš±ë” ì–´ê¸‹ë‚˜ê²Œ ë„ë‹ˆë‹¤.
            

# (2) ì„¤ê³„ì— ì¼ê´€ì„± ë¶€ì—¬í•˜ê¸°

- ì¼ê´€ì„± ìˆëŠ” ì„¤ê³„ë¥¼ ìœ„í•´
    - ë‹¤ì–‘í•œ ì„¤ê³„ ê²½í—˜ê³¼ ë„ë¦¬ ì•Œë ¤ì§„ **ë””ìì¸ íŒ¨í„´ì„ í•™ìŠµí•˜ê³ ** ë³€ê²½ì´ë¼ëŠ” ë¬¸ë§¥ ì•ˆì—ì„œ ë””ìì¸ íŒ¨í„´ì„ ì ìš©í•´ë³´ëŠ” ê²ƒì´ë‹¤.
    - ë””ìì¸ íŒ¨í„´ â†’ íŠ¹ì • ë³€ê²½ì— ëŒ€í•´ ì¼ê´€ì„± ìˆëŠ” ì„¤ê³„ë¥¼ ë§Œë“¤ ìˆ˜ ìˆëŠ” ê²½í—˜ ë²•ì¹™ì„ ëª¨ì•„ë†“ì€ ì„¤ê³„ í…œí”Œë¦¿ì´ë¯€ë¡œ ë¹ ë¥¸ ì‹œê°„ ì•ˆì— ì „ë¬¸ê°€ì˜ ê²½í—˜ì„ í¡ìˆ˜ ê°€ëŠ¥
        
        ![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/e2c6ccd4-4439-43db-96e9-e654aaf4aa71/f075e1b8-90f1-469e-bb7d-c15650e397e1/image.png)
        
    - ëª¨ë“  ê²½ìš°ì— ì í•©í•œ íŒ¨í„´ì„ ì°¾ì„ ìˆ˜ëŠ” ì—†ìœ¼ë¯€ë¡œ í˜‘ë ¥ì„ ì¼ê´€ì„± ìˆê²Œ ë§Œë“¤ê¸° ìœ„í•´ ë‹¤ìŒê³¼ ê°™ì€ ê¸°ë³¸ ì§€ì¹¨ì„ ë”°ë¥´ì
        - (1) ë³€í•˜ëŠ” ê°œë…ì„ ë³€í•˜ì§€ ì•ŠëŠ” ê°œë…ìœ¼ë¡œë¶€í„° ë¶„ë¦¬
            - ìƒˆë¡œìš´ ìš”êµ¬ì‚¬í•­ì´ ìƒê¸¸ ë•Œë§ˆë‹¤ ë°”ë€ŒëŠ” ë¶€ë¶„ì´ ìˆë‹¤ë©´ ê·¸ í–‰ë™ì„ ë°”ë€Œì§€ ì•ŠëŠ” ë‹¤ë¥¸ ë¶€ë¶„ìœ¼ë¡œë¶€í„° ê³¨ë¼ë‚´ì„œ ë¶„ë¦¬í•´ì•¼í•œë‹¤.
        - (2) ë³€í•˜ëŠ” ê°œë…ì„ ìº¡ìŠí™”
            - ë°”ë€ŒëŠ” ë¶€ë¶„ì„ ë”°ë¡œ ë½‘ì•„ì„œ ìº¡ìŠí™”í•˜ë©´ ë‚˜ì¤‘ì— ë°”ë€Œì§€ ì•ŠëŠ” ë¶€ë¶„ì—ëŠ” ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•Šì€ ì±„ë¡œ ê·¸ ë¶€ë¶„ë§Œ ê³ ì¹˜ê±°ë‚˜ í™•ì¥í•  ìˆ˜ ìˆë‹¤.
    
- ì˜í™” ì˜ˆë§¤ ì‹œìŠ¤í…œ ì˜ˆì œë¡œ í™•ì¸í•´ë³´ì

## ì¡°ê±´ ë¡œì§ ëŒ€ ê°ì²´ íƒìƒ‰

- ReservationAgency
    
    ```java
    public class ReservationAgency {
        public Reservation reserve(Screening screening, Customer customer,
                                   int audienceCount) {
            Movie movie = screening.getMovie();
    
            boolean discountable = false;
            for(DiscountCondition condition : movie.getDiscountConditions()) {
                if (condition.getType() == DiscountConditionType.PERIOD) {
                    discountable = screening.getWhenScreened().getDayOfWeek().equals(condition.getDayOfWeek()) &&
                            condition.getStartTime().compareTo(screening.getWhenScreened().toLocalTime()) <= 0 &&
                            condition.getEndTime().compareTo(screening.getWhenScreened().toLocalTime()) >= 0;
                } else {
                    discountable = condition.getSequence() == screening.getSequence();
                }
    
                if (discountable) {
                    break;
                }
            }
    
            Money fee;
            if (discountable) {
                Money discountAmount = Money.ZERO;
                switch(movie.getMovieType()) {
                    case AMOUNT_DISCOUNT:
                        discountAmount = movie.getDiscountAmount();
                        break;
                    case PERCENT_DISCOUNT:
                        discountAmount = movie.getFee().times(movie.getDiscountPercent());
                        break;
                    case NONE_DISCOUNT:
                        discountAmount = Money.ZERO;
                        break;
                }
    
                fee = movie.getFee().minus(discountAmount).times(audienceCount);
            } else {
                fee = movie.getFee().times(audienceCount);
            }
    
            return new Reservation(customer, screening, fee, audienceCount);
        }
    }
    ```
    
    - 2ê°œì˜ ì¡°ê±´ ë¡œì§ ì¡´ì¬
        1. í• ì¸ ì¡°ê±´ì˜ ì¢…ë¥˜ë¥¼ ê²°ì •í•˜ëŠ” ë¶€ë¶„
        2. í• ì¸ ì •ì±…ì„ ê²°ì •í•˜ëŠ” ë¶€ë¶„ 
        
        â†’ ì´ ì„¤ê³„ê°€ ë‚˜ì¨ â†’ ë³€ê²½ì˜ ì£¼ê¸°ê°€ ì„œë¡œ ë‹¤ë¥¸ ì½”ë“œê°€ í•œ í´ë˜ìŠ¤ ì•ˆì— ë­‰ì³ìˆê¸° ë•Œë¬¸ì´ë‹¤. â†’ ìƒˆë¡œìš´ ì •ì±… ì¶”ê°€ ì‹œ ê¸°ì¡´ ì½”ë“œì˜ ë‚´ë¶€ë¥¼ ìˆ˜ì •í•´ì•¼í•˜ë¯€ë¡œ ì˜¤ë¥˜ í™•ë¥  ë†’ì•„ì§
        
        - ì¦‰, ìƒˆë¡œìš´ ì¡°ê±´ì´ í•„ìš”í•˜ë©´ ifë¬¸ë“¤ì— else ì ˆì„ ì¶”ê°€í•˜ê²Œ ë  ê²ƒì´ë©° ì´ ë¡œì§ë“¤ì´ ê°œë³„ì ì¸ ë³€ê²½ì´ë¼ê³  ë³¼ ìˆ˜ ìˆë‹¤.
- ì ˆì°¨ì§€í–¥ì—ì„œëŠ” ë³€ê²½ì„ ì²˜ë¦¬í•  ë•Œ ì¡°ê±´ë¬¸ì˜ ë¶„ê¸°ë¥¼ ì¶”ê°€í•˜ê±°ë‚˜ ê°œë³„ ë¶„ê¸° ë¡œì§ì„ ìˆ˜ì •í•œë‹¤.
- í•˜ì§€ë§Œ ê°ì²´ì§€í–¥ì—ì„œ ë³€ê²½ì„ ë‹¤ë£¨ëŠ” ì „í†µì ì¸ ë°©ë²•ì€ ì¡°ê±´ ë¡œì§ì„ **`ê°ì²´ ì‚¬ì´ì˜ ì´ë™`**ìœ¼ë¡œ ë°”ê¾¸ëŠ” ê²ƒì´ë‹¤.
    - Movieì½”ë“œì—ì„œ í˜„ì¬ì˜ í• ì¸ ì •ì±…ì´ ì–´ë–¤ ì¢…ë¥˜ì¸ì§€ í™•ì¸í•˜ì§€ ì•Šê³  ë‹¨ìˆœíˆ í˜„ì¬ì˜ í• ì¸ ì •ì±…ì„ ë‚˜íƒ€ë‚´ëŠ” discountPolicyì— í•„ìš”í•œ ë©”ì‹œì§€ë¥¼ ì „ì†¡í•  ë¿ì´ë‹¤.
        - ì¦‰, í• ì¸ ì •ì±…ì˜ ì¢…ë¥˜ë¥¼ ì²´í¬í•˜ë˜ ì¡°ê±´ë¬¸ì´ discountPolicyë¡œì˜ ê°ì²´ ì´ë™ìœ¼ë¡œ ëŒ€ì²´ëœ ê²ƒì´ë‹¤.
        
        ```java
        public class Movie{
        	private DiscountPolicy discountPolicy;
        	
        	public Money calculateMovieFee(Screening screening){
        		return fee.minus(discountPolicy.calculateDiscountAmount(screening));
        	}
        	}
        ```
        
        - if ì¡°ê±´ ì ˆë¡œ ì²´í¬í•˜ë˜ ê²ƒì„â†’ ê°ì²´ ì‚¬ì´ì˜ ì´ë™ìœ¼ë¡œ ë°”ê¾¸ê¸° ìœ„í•´ ê°ì²´ ì§€í–¥ì´ ì œê³µí•˜ëŠ” ì„¤ê³„ ê¸°ë²•ì¸ â€œë‹¤í˜•ì„±â€ì„ ì‚¬ìš©í•œë‹¤.
        - ê·¸ë ‡ê¸° ë•Œë¬¸ì— Movieì˜ ê²½ìš° í• ì¸ ì¢…ë¥˜ì— ìƒê´€ì—†ì´ discountPolicyì—ê²Œ ìì‹ ì˜ ìš”ì²­ì„ ë³´ë‚´ëŠ” ê²ƒë§Œ ì•Œì•„ë„ ëœë‹¤.
    - DiscountPolicyì—ì„œëŠ” DiscountConditionê³¼ í˜‘ë ¥í•˜ëŠ”ë° DiscountConditionë¥¼ ë¯¿ê³  DiscountConditionì—ê²Œ isSatisfiedBy() ë©”ì„œë“œë¥¼ ì „ì†¡í•˜ì—¬ ì¡°ê±´ì´ ë§ëŠ”ì§€ í™•ì¸í•œë‹¤.
        
        ```java
        public abstract class DiscountPolicy {
            private List<DiscountCondition> conditions = new ArrayList<>();
        
            public Money calculateDiscountAmount(Screening screening) {
                for(DiscountCondition each : conditions) {
                    if (each.isSatisfiedBy(screening)) {
                        return getDiscountAmount(screening);
                    }
                }
        
                return Money.ZERO;
            }
        
         
        }
        ```
        
- ì´ë ‡ê²Œ ì¡°ê±´ ë¡œì§ì„ â†’ ê°ì²´ ì‚¬ì´ì˜ íƒìƒ‰ ê³¼ì •ìœ¼ë¡œ ë³€ê²½í•˜ì˜€ë‹¤.
    - ê·¸ë¦¬ê³  ì‹¤ì œ í˜‘ë ¥í•˜ëŠ” ê²ƒì€ êµ¬ì²´ì ì¸ ê°ì²´ì´ë‹¤. ê·¸ë ‡ê¸° ë•Œë¬¸ì— ì´ êµ¬ì²´ì ì¸ ê°ì²´ë“¤ì€ ì¶”ìƒ í´ë˜ìŠ¤ì¸ DiscountPolicyì™€ DiscountConditionì„ ëŒ€ì²´í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤. (DiscountPolicyì™€ DiscountConditionì˜ ì„œë¸Œ íƒ€ì…ì´ì–´ì•¼ í•œë‹¤.)
        
        ![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/e2c6ccd4-4439-43db-96e9-e654aaf4aa71/f15665b2-5bc2-41b1-ad8b-05ee55c00098/image.png)
        
    
- ì •ë¦¬í•˜ìë©´, ì¡°ê±´ì— ë”°ë¼ ë‚˜ëˆ ì„œ ë”°ë¡œ ë©”ì„œë“œë¥¼ ê²°ì •í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ í˜‘ë ¥í•˜ë©´ì„œ ì‹¤ì œë¡œ ì‹¤í–‰í•  ë©”ì„œë“œë¥¼ ê²°ì •í•˜ëŠ” ê²ƒì€ ë©”ì‹œì§€ë¥¼ ìˆ˜ì‹ í•œ ê°ì²´ì˜ ì±…ì„ìœ¼ë¡œ ë„˜ê¸°ëŠ” ê²ƒì´ë‹¤.
- ì¡°ê±´ ë¡œì§ì„ ê°ì²´ ì‚¬ì´ì˜ ì´ë™ìœ¼ë¡œ ëŒ€ì²´í•˜ê¸° ìœ„í•´ì„œëŠ” ì»¤ë‹¤ë€ í´ë˜ìŠ¤ë¥¼ ë” ì‘ì€ í´ë˜ìŠ¤ë“¤ë¡œ ë¶„ë¦¬í•´ì•¼í•œë‹¤.
- **í´ë˜ìŠ¤ë¥¼ ë¶„ë¦¬í•˜ê¸° ìœ„í•œ ê¸°ì¤€**
    - â€œë³€ê²½ì˜ ì´ìœ ì™€ ì£¼ê¸°â€
    - í´ë˜ìŠ¤ëŠ” ëª…í™•íˆ ë‹¨ í•˜ë‚˜ì˜ ì´ìœ ì— ì˜í•´ì„œë§Œ ë³€ê²½ë˜ì–´ì•¼ í•˜ê³  í´ë˜ìŠ¤ ì•ˆì˜ ëª¨ë“  ì½”ë“œëŠ” í•¨ê»˜ ë³€ê²½ë˜ì–´ì•¼ í•œë‹¤.
    - ì¦‰, ë‹¨ì¼ ì±…ì„ ì›ì¹™ì„ ë”°ë¥´ë„ë¡ í´ë˜ìŠ¤ë¥¼ ë¶„ë¦¬í•˜ì
- í˜‘ë ¥ íŒ¨í„´ê³¼ ì¼ê´€ì„±
    - í° ë©”ì„œë“œ ì•ˆì— ë­‰ì³ìˆë˜ ì¡°ê±´ ë¡œì§ë“¤ì„ ë³€ê²½ì˜ ì••ë ¥ì— ë§ì¶° ì‘ì€ í´ë˜ìŠ¤ë“¤ë¡œ ë¶„ë¦¬í•˜ê³  ë‚˜ë©´ ì¸ìŠ¤í„´ìŠ¤ë“¤ ì‚¬ì´ì˜ í˜‘ë ¥ íŒ¨í„´ì— ì¼ê´€ì„±ì„ ë¶€ì—¬í•˜ê¸° ì‰¬ì›Œì§„ë‹¤.
    - ìœ ì‚¬í•œ í–‰ë™ì„ ìˆ˜í–‰í•˜ëŠ” ì‘ì€ í´ë˜ìŠ¤ë“¤ì´ â€œì—­í• â€ì´ë¼ëŠ” ì¶”ìƒí™”ë¡œ ë¬¶ì´ê²Œ ë˜ê³  â€œì—­í• â€ì‚¬ì´ì—ì„œ ì´ë¤„ì§€ëŠ” í˜‘ë ¥ ë°©ì‹ì´ ì „ì²´ ì„¤ê³„ì˜ ì¼ê´€ì„±ì„ ìœ ì§€í•  ìˆ˜ ìˆê²Œ ì´ëŒì–´ì¤€ë‹¤.
    - ì¦‰, í˜‘ë ¥ íŒ¨í„´ì„ ê¸°ì¤€ìœ¼ë¡œ í´ë˜ìŠ¤ë¥¼ ë¶„ë¦¬í•˜ì—¬ ì¼ê³ ë‚˜ì„±ì´ ìˆê²Œ ëœë‹¤.
    - ìƒˆë¡œìš´ í• ì¸ ì •ì±…ì„ ì¶”ê°€í•  ë•Œ ìì‹ í´ë˜ìŠ¤ë¡œ ì¶”ê°€í•´ì•¼í•œë‹¤ëŠ” ê°€ì´ë“œê°€ ì œê³µëœë‹¤ + ê¸°ì¡´ ì½”ë“œë¥¼ ìˆ˜ì •í•  í•„ìš”ë„ ì—†ë‹¤.
- ì¼ê´€ì„± ìˆëŠ” í˜‘ë ¥ì„ ìœ„í•œ ì§€ì¹¨
    - (1) ë³€í•˜ëŠ” ê°œë…ì„ ë³€í•˜ì§€ ì•ŠëŠ” ê°œë…ìœ¼ë¡œë¶€í„° ë¶„ë¦¬
        - í• ì¸ ì¡°ê±´ì˜ íƒ€ì…ì„ ì¡°ê±´ë¬¸ìœ¼ë¡œ êµ¬ë¶„í•˜ì˜€ë˜ ê²ƒì„ ê°œë³„ì ì¸ ê°ì²´ë¡œ ë¶„ë¦¬í•˜ê³  ì¼ê´€ì„± ìˆê²Œ í˜‘ë ¥í•˜ê¸° ìœ„í•´ íƒ€ì… ê³„ì¸µì„ êµ¬ì„±í–ˆë‹¤.
        - ê·¸ë¦¬ê³  ì´ íƒ€ì… ê³„ì¸µì„ í´ë¼ì´ì–¸íŠ¸ë¡œë¶€í„° ë¶„ë¦¬í•˜ê¸° ìœ„í•´ â€œì—­í• â€ì„ ë„ì…í•˜ê³  ìµœì¢…ì ìœ¼ë¡œ ì´ ì—­í• ì„ ì¶”ìƒ í´ë˜ìŠ¤ì™€ ì¸í„°í˜ì´ìŠ¤ë¡œ êµ¬í˜„í•¨
        - â†’ ì¦‰, ë³€í•˜ëŠ” ê°œë…ì„ ë³„ë„ì˜ ì„œë¸Œ íƒ€ì…ìœ¼ë¡œ ë¶„ë¦¬í•œ í›„ ì´ ì„œë¸Œ íƒ€ì…ë“¤ì„ í´ë¼ì´ì–¸íŠ¸ë¡œë¶€í„° ìº¡ìŠí™”í•¨
    - (2) ë³€í•˜ëŠ” ê°œë…ì„ ìº¡ìŠí™”
        - Movieë¡œë¶€í„° í• ì¸ ì •ì±…ì„ ë¶„ë¦¬í•œ í›„ ì¶”ìƒ í´ë˜ìŠ¤ì¸ DiscountPolicyë¥¼ ë¶€ëª¨ ì‚¼ì•„ ìƒì† ê³„ì¸µì„ êµ¬ì„±í•œ ì´ìœ ê°€ ë°”ë¡œ Movieë¡œë¶€í„° êµ¬ì²´ì ì¸ í• ì¸ì •ì±…ë“¤ì„ ìº¡ìŠí™”í•˜ê¸° ìœ„í•´ì„œì´ë‹¤.
        - ì‹¤í–‰ ì‹œì ì— MovieëŠ” ìì‹ ê³¼ í˜‘ë ¥í•˜ëŠ” ê°ì²´ì˜ êµ¬ì²´ì ì¸ íƒ€ì…ì— ëŒ€í•´ ì•Œì§€ ëª»í•œë‹¤.
            - Movieê°€ ì•Œê³  ìˆëŠ” ê²ƒì€ ë‹¨ì§€ DiscountPolicy í´ë˜ìŠ¤ì˜ ì¸í„°í˜ì´ìŠ¤ì— ì •ì˜ëœ calculateDiscountAmount ë©”ì‹œì§€ë¥¼ ì´í•´í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒ ë¿ì´ë‹¤. ìˆ˜ì‹ ìì˜ íƒ€ì…ì€ ëª¨ë¥¸ë‹¤.
        - ì¶”ìƒí™”ì— ì˜ì¡´í•˜ê²Œ í•˜ì
            - ê²°í•©ë„ë¥¼ ë‚®ì¶”ê³  ëŒ€ì²´ ê°€ëŠ¥í•œ ì—­í• ë¡œ êµ¬ì„±ëœ í˜‘ë ¥ì„ ì„¤ê³„í•  ìˆ˜ ìˆê²Œ í•´ì¤€ë‹¤.
- íƒ€ì…ì„ ìº¡ìŠí™”í•˜ê³  ë‚®ì€ ì˜ì¡´ì„±ì„ ìœ ì§€í•˜ê¸° ìœ„í•´ ë‹¤ì–‘í•œ ê¸°ë²•ë“¤ì´ í•„ìš”í•˜ë‹¤.
    - 6ì¥ì˜ ì¸í„°í˜ì´ìŠ¤ ì„¤ê³„ ì›ì¹™ë“¤ ì ìš© , 8, 9ì¥ì˜ ì˜ì¡´ì„± ê´€ë¦¬ ê¸°ë²• , 11ì¥ì˜ í•©ì„±ì„ ì´ìš©í•œ ë°©ë²•, 13ì¥ì—ì„œì˜ ë¦¬ìŠ¤ì½”í”„ ì¹˜í™˜ì›ì¹™

## ìº¡ìŠí™” ë‹¤ì‹œ ì‚´í´ë³´ê¸°

- ë³´í†µ ì‚¬ëŒë“¤ì€ ìº¡ìŠí™”ì— ê´€í•œ ì´ì•¼ê¸°ë¥´ ã„¹ë“¤ìœ¼ë©´ â€œë°ì´í„° ì€ë‹‰â€ì„ ë– ì˜¬ë¦°ë‹¤.
    - ì€ë‹‰ì€ ì˜¤ì§ ì™¸ë¶€ì— ê³µê°œëœ ë©”ì„œë“œë¥¼ í†µí•´ì„œë§Œ ê°ì²´ì˜ ë‚´ë¶€ì— ì ‘ê·¼í•  ìˆ˜ ìˆê²Œ ì œí•œí•˜ì—¬ ê°ì²´ ë‚´ë¶€ ìƒíƒœ êµ¬í˜„ì„ ìˆ¨ê¸°ëŠ” ê¸°ë²•ì´ë‹¤.
    - ì¦‰, ë³€ìˆ˜ë¥¼ privateìœ¼ë¡œ ì„ ì–¸í•˜ê³  ì˜¤ì§ í•´ë‹¹ í´ë˜ìŠ¤ì˜ ë©”ì„œë“œë§Œì´ ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ì— ì ‘ê·¼í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤.
- í•˜ì§€ë§Œ **ìº¡ìŠí™”ëŠ” ì€ë‹‰ ê·¸ ì´ìƒì´ë‹¤.**
    - ìº¡ìŠí™”ë€ ë‹¨ìˆœíˆ ë°ì´í„°ë¥¼ ê°ì¶”ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ë³€í•  ìˆ˜ ìˆëŠ” ëª¨ë“  â€œê°œë…â€ì„ ê°ì¶”ëŠ” ê²ƒì´ë‹¤.
        - ì–´ë–¤ ê²ƒì´ë“  ê°ì¶”ëŠ” ê²ƒì´ë‹¤.
    - ë‹¨ì§€ ë°ì´í„° ì€ë‹‰ì„ ì˜ë¯¸í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ì½”ë“œ ìˆ˜ì •ìœ¼ë¡œ ì¸í•œ íŒŒê¸‰ íš¨ê³¼ë¥¼ ì œì–´í•  ìˆ˜ ìˆëŠ” ëª¨ë“  ê¸°ë²•ì´ ìº¡ìŠí™”ì˜ ì¼ì¢…ì´ë‹¤.
- ìº¡ìŠí™”ì˜ ëŒ€í‘œì ¹ì¸ ì˜ˆ
    - ê°ì²´ì˜ í¼ë¸”ë¦­ ì¸í„°í˜ì´ìŠ¤ì™€ êµ¬í˜„ì„ ë¶„ë¦¬
    - ê°ì²´ë¥¼ êµ¬í˜„í•œ ê°œë°œìëŠ” í•„ìš”í•  ë•Œ ê°ì²´ì˜ ë‚´ë¶€ êµ¬í˜„ì„ ìˆ˜ì •í•˜ê¸° ì›í•œë‹¤. ê·¸ë¦¬ê³  í˜‘ë ¥í•˜ëŠ” í´ë¼ì´ì–¸íŠ¸ë¥¼ ê°œë°œí•  ë•Œ ê°ì²´ì˜ ì¸í„°í˜ì´ìŠ¤ê°€ ë³€í•˜ì§€ ì•Šê¸°ë¥¼ ë°”ë€ë‹¤.
    - â†’ ê·¸ëŸ¬ë¯€ë¡œ ìì£¼ ë³€ê²½ë˜ëŠ” ë‚´ë¶€ êµ¬í˜„ì„ ì•ˆì •ì ì¸ í¼ë¸”ë¦­ ì¸í„°í˜ì´ìŠ¤ ë’¤ë¡œ ìˆ¨ê²¨ì•¼ í•œë‹¤.
- ë‹¤ì–‘í•œ ì¢…ë¥˜ì˜ ìº¡ìŠí™”
    
    ![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/e2c6ccd4-4439-43db-96e9-e654aaf4aa71/766724eb-cb46-4746-82a4-e7b5169c1281/image.png)
    
    - ë°ì´í„° ìº¡ìŠí™”
        - `Movie`Â ì˜ ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜Â `title`Â ì€Â `private`Â ì´ê¸° ë•Œë¬¸ì— ì™¸ë¶€ì—ì„œ ì§ì ‘ ì ‘ê·¼í•  ìˆ˜ ì—†ë‹¤.
        - ë©”ì„œë“œë¥¼ ì´ìš©í•´ì„œ í•´ë‹¹ ì†ì„±ì— ì ‘ê·¼í•˜ëŠ” ë°©ë²• ë¿ì´ë‹¤.
        - ì¦‰, í´ë˜ìŠ¤ëŠ” ë‚´ë¶€ì—ì„œ ê´€ë¦¬í•˜ëŠ” ë°ì´í„°ë¥¼ ìº¡ìŠí™”í•œë‹¤.
    - ë©”ì„œë“œ ìº¡ìŠí™”
        - `DiscountPolicy`Â ë‚´ë¶€ì˜Â `getDiscountAmount`Â ë©”ì„œë“œëŠ”Â `protected`Â ë‹¤.
        - ì™¸ë¶€ì—ì„œ ì´ ë©”ì„œë“œì— ì ‘ê·¼í•  ìˆ˜ ì—†ê³  í´ë˜ìŠ¤ ë‚´ë¶€ì— ì„œë¸Œí´ë˜ìŠ¤ì—ì„œë§Œ ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë‹¤.
        - â†’ í´ë˜ìŠ¤ ì™¸ë¶€ì— ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•Šê³  ë©”ì„œë“œë¥¼ ìˆ˜ì •í•  ìˆ˜ ìˆë‹¤. (ë‚´ë¶€ í–‰ë™ ìº¡ìŠí™”)
    - ê°ì²´ ìº¡ìŠí™”
        - `Movie`Â ëŠ”Â `discountPolicy`Â ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ë¥¼ í¬í•¨í•œë‹¤.
        - ì´ ë³€ìˆ˜ëŠ”Â `private`Â ì´ê¸°ë•Œë¬¸ì—Â `Movie`Â ì™€Â `DiscountPolicy`Â ê°„ ê´€ê³„ë¥¼ ë³€ê²½í•˜ë”ë¼ë„ ì™¸ë¶€ì— ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•ŠëŠ”ë‹¤.
        - ê°ì²´ ìº¡ìŠí™”ëŠ” **í•©ì„±**ì„ ì˜ë¯¸í•œë‹¤.
    - ì„œë¸Œíƒ€ì… ìº¡ìŠí™”
        - `Movie`Â ëŠ”Â `DiscountPolicy`Â ì— ëŒ€í•´ ì•Œê³  ìˆì§€ë§Œ ê·¸ êµ¬í˜„ì²´ í´ë˜ìŠ¤ë“¤ì—ëŒ€í•´ì„œëŠ” ì•Œì§€ ëª»í•œë‹¤.
        - í•˜ì§€ë§Œ ëŸ°íƒ€ì„ì— ê·¸ í´ë˜ìŠ¤ë“¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë“¤ê³¼ í˜‘ë ¥í•  ìˆ˜ ìˆë‹¤.
        - ë‹¤ì‹œ ë§í•´ ì„œë¸Œíƒ€ì…ì˜ ì¢…ë¥˜ë¥¼ ìº¡ìŠí™”í•˜ê³  ìˆëŠ” ê²ƒì´ë‹¤. ì´ëŠ” **ë‹¤í˜•ì„±**ì˜ ê¸°ë°˜ì´ ëœë‹¤.
    - ë°ì´í„° ìº¡ìŠí™”ì™€ ë©”ì„œë“œ ìº¡ìŠí™” â†’ **ê°œë³„ ê°ì²´ì— ëŒ€í•œ** ë³€ê²½ì„ ê´€ë¦¬í•˜ê¸° ìœ„í•´ ì‚¬ìš©
    - ê°ì²´ ìº¡ìŠí™”ì™€ ì„œë¸Œíƒ€ì… ìº¡ìŠí™” â†’ **ê°ì²´ë“¤ì˜ ê´€ê³„**ì— ëŒ€í•œ ë³€ê²½ì„ ê´€ë¦¬í•˜ê¸° ìœ„í•´ ì‚¬ìš©
- í˜‘ë ¥ì„ ì¼ê´€ì„± ìˆê²Œ ë§Œë“¤ê¸° ìœ„í•´ ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ë°©ë²•
    - ì„œë¸Œ íƒ€ì… ìº¡ìŠí™”ì™€ ê°ì²´ ìº¡ìŠí™”ë¥¼ ì¡°í•©í•˜ëŠ” ê²ƒ!
        - ê°ì²´ ìº¡ìŠí™” â†’ í•©ì„±
        - ì„œë¸Œíƒ€ì… ìº¡ìŠí™” â†’ ì¸í„°í˜ì´ìŠ¤ ìƒì†
    - ë°©ë²•
        - ë³€í•˜ëŠ” ë¶€ë¶„ì„ ë¶„ë¦¬í•´ì„œ íƒ€ì… ê³„ì¸µì„ ë§Œë“ ë‹¤.
            - ë³€í•˜ì§€ ì•ŠëŠ” ë¶€ë¶„ì„ ë¶„ë¦¬
            - ë³€í•˜ëŠ” ë¶€ë¶„ë“¤ì˜ â€œê³µí†µì ì¸ í–‰ë™ì„ ì¶”ìƒ í´ë˜ìŠ¤ë‚˜ ì¸í„°í˜ì´ìŠ¤ë¡œ ì¶”ìƒí™”â€í•œ í›„ ë³€í•˜ëŠ” ë¶€ë¶„ë“¤ì´ ì´ ì¶”ìƒ í´ë˜ìŠ¤ë‚˜ ì¸í„°í˜ì´ìŠ¤ë¥¼ ìƒì† ë°›ì•„ ë§Œë“ ë‹¤.
            - ex) DiscountPolicyë¥¼ ì¶”ìƒ í´ë˜ìŠ¤ë¡œ ë§Œë“¤ì–´ë²„ë¦° ê²ƒ, DiscountConditionì„ ì¸í„°í˜ì´ìŠ¤ë¡œ êµ¬í˜„í•œ ì 
        - ë³€í•˜ì§€ ì•ŠëŠ” ë¶€ë¶„ì˜ ì¼ë¶€ë¥¼ íƒ€ì… ê³„ì¸µì„ í•©ì„±
            - ì•ì—ì„œ êµ¬í˜„í•œ íƒ€ì… ê³„ì¸µ(ì¸í„°í˜ì´ìŠ¤ë‚˜ ì¶”ìƒ í´ë˜ìŠ¤)ì„ ë³€í•˜ì§€ ì•ŠëŠ” ë¶€ë¶„ì— í•©ì„±í•œë‹¤.
            - ë³€í•˜ì§€ ì•ŠëŠ” ë¶€ë¶„ì—ì„œëŠ” ë³€ê²½ë˜ëŠ” êµ¬ì²´ì ì¸ ì‚¬í•­ì— ê²°í•©ë¼ì„œëŠ” ì•ˆëœë‹¤.
            - ì˜¤ì§ ì¶”ìƒí™”ì—ë§Œ ì˜ì¡´í•˜ê²Œ ë§Œë“¤ê¸° ìœ„í•´ ì˜ì¡´ì„± ì£¼ì…ê³¼ ê°™ì€ ê²°í•©ë„ ëŠìŠ¨í•˜ê²Œ í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ì‚¬ìš©í•œë‹¤.
            - â†’ ê·¸ëŸ¬ë©´ ë³€í•˜ì§€ ì•ŠëŠ” ë¶€ë¶„ì€ ë³€í•˜ëŠ” ë¶€ë¶„ì˜ êµ¬ì²´ì ì¸ ì¢…ë¥˜ì— ëŒ€í•´ì„œ ì•Œì§€ ëª»í•œë‹¤.
            - ex) Movieê°€ DiscountPolicyë¥¼ í•©ì„± ê´€ê³„ë¡œ ì—°ê²°í•˜ê³  ìƒì„±ìë¥¼ í†µí•´ ì˜ì¡´ì„±ì„ í•´ê²°í•œ ì´ìœ 
            

# (3) ì¼ê´€ì„± ìˆëŠ” ê¸°ë³¸ ì •ì±… êµ¬í˜„í•˜ê¸°

## ë³€ê²½ ë¶„ë¦¬í•˜ê¸°

- ì¼ê´€ì„± ìˆëŠ” í˜‘ë ¥ì„ ë§Œë“¤ê¸° ìœ„í•œ ì²« ë²ˆì§¸ ë‹¨ê³„ëŠ” ë³€í•˜ëŠ” ê°œë…, ë³€í•˜ì§€ ì•ŠëŠ” ê°œë…ì„ ë¶„ë¦¬í•˜ëŠ” ê²ƒì´ë‹¤.
- í•¸ë“œí° ê³¼ê¸ˆ ì‹œìŠ¤í…œì˜ ê¸°ë³¸ ì •ì±…ì—ì„œ ë³€í•˜ëŠ” ë¶€ë¶„ê³¼ ë³€í•˜ì§€ ì•ŠëŠ” ë¶€ë¶„ì„ êµ¬ë¶„í•˜ê¸° ìœ„í•´ ìš”êµ¬ì‚¬í•­ì„ ì •ë¦¬í•´ë³¼ ìˆ˜ ìˆë‹¤.
    - ê³µí†µì  :  ë¨¼ì € ì‹œê°„ëŒ€ë³„, ìš”ì¼ë³„, êµ¬ê°„ë³„ ë°©ì‹ì˜ ê³µí†µì ì€ ê° ê¸°ë³¸ ì •ì±…ì„ êµ¬ì„±í•˜ëŠ” ë°©ì‹ì´ ìœ ì‚¬í•˜ë‹¤ëŠ” ì ì´ë‹¤.
        - ê¸°ë³¸ ì •ì±…ì€ í•œ ê°œ ì´ìƒì˜ â€˜ê·œì¹™â€™ìœ¼ë¡œ êµ¬ì„±ëœë‹¤.
        - í•˜ë‚˜ì˜ â€˜ê·œì¹™â€™ì€ â€˜ì ìš©ì¡°ê±´â€™ê³¼ â€˜ë‹¨ìœ„ìš”ê¸ˆâ€™ì˜ ì¡°í•©ì´ë‹¤.
            
            !https://velog.velcdn.com/images/mj3242/post/6012f005-1c33-4094-9e30-bbd5a08825ff/image.png
            
    - ë°©ì‹ì˜ ì°¨ì´ì  :  ê° ê¸°ë³¸ ì •ì±…ë³„ë¡œ ìš”ê¸ˆì„ ê³„ì‚°í•˜ëŠ” â€˜ì ìš©ì¡°ê±´â€™ì˜ í˜•ì‹ì´ ë‹¤ë¥´ë‹¤ëŠ” ê²ƒì´ë‹¤.
        - ex) ìš”ì¼ë³„ ë°©ì‹ â†’ íŠ¹ì • ìš”ì¼ì— í•´ë‹¹í•  ê²½ìš°ì—ë§Œ ìš”ê¸ˆì„ ê³„ì‚°, ì‹œê°„ë³„ ë°©ì‹ â†’ íŠ¹ì • ì‹œê°„ êµ¬ê°„ì— í¬í•¨ë  ê²½ìš°ì—ë§Œ ìš”ê¸ˆì„ ê³„ì‚°
        - ì¡°ê±´ì˜ ì„¸ë¶€ ë‚´ìš©ì´ ë°”ë¡œ ë³€í™”ì— í•´ë‹¹í•œë‹¤.
    - ê³µí†µì  â‡’  ë³€í•˜ì§€ ì•ŠëŠ” ë¶€ë¶„, ì°¨ì´ì  â‡’  ë³€í•˜ëŠ” ë¶€ë¶„
        - ë”°ë¼ì„œ ë³€í•˜ì§€ ì•ŠëŠ” â€˜ê·œì¹™â€™ìœ¼ë¡œë¶€í„° ë³€í•˜ëŠ” â€˜ì ìš©ì¡°ê±´â€™ì„ ë¶„ë¦¬í•´ì•¼ í•œë‹¤.

## ë³€ê²½ ìº¡ìŠí™”í•˜ê¸°

- í˜‘ë ¥ì„ ì¼ê´€ì„± ìˆê²Œ ë§Œë“¤ê¸° ìœ„í•´ì„œ ë³€ê²½ì„ ìº¡ìŠí™”í•´ì„œ íŒŒê¸‰íš¨ê³¼ë¥¼ ì¤„ì—¬ì•¼ í•œë‹¤.
- ë³€í•˜ì§€ ì•ŠëŠ” ë¶€ë¶„ìœ¼ë¡œë¶€í„° ë³€í•˜ëŠ” ë¶€ë¶„ì„ ë¶„ë¦¬í•˜ê³  ë³€í•˜ëŠ” ë¶€ë¶„ì˜ ê³µí†µì ì„ ì¶”ìƒí™” í•˜ì
    - ê·¸ë¦¬ê³  ë³€í•˜ì§€ ì•ŠëŠ” ë¶€ë¶„ì´ ì˜¤ì§ ì´ ì¶”ìƒí™”ì—ë§Œ ì˜ì¡´í•˜ë„ë¡ ê´€ê³„ë¥¼ ì œí•œí•˜ë©´ ë³€ê²½ì„ ìº¡ìŠí™” ê°€ëŠ¥
- ë³€í•˜ì§€ ì•ŠëŠ” â€œê·œì¹™â€ìœ¼ë¡œë¶€í„° ë³€í•˜ëŠ” â€œì ìš© ì¡°ê±´â€ì„ ë¶„ë¦¬í•´ì„œ ì¶”ìƒí™”í•œ í›„, ìš”ì¼ë³„ , êµ¬ê°„ë³„ ë°©ì‹ì„ ì„œë¸Œ íƒ€ì…ìœ¼ë¡œ ë§Œë“ ë‹¤. (=ì„œë¸Œíƒ€ì… ìº¡ìŠí™”)
- ê·¸ë¦¬ê³  ê·œì¹™ì´ ì ìš© ì¡°ê±´ì„ í‘œí˜„í•˜ëŠ” ì¶”ìƒí™”ë¥¼ í•©ì„± ê´€ê³„ë¡œ ì—°ê²°í•œë‹¤. (= ê°ì²´ ìº¡ìŠí™”)
- ì´ˆê¸° ë„ë©”ì¸ ëª¨ë¸
    
    ![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/e2c6ccd4-4439-43db-96e9-e654aaf4aa71/d3d87393-d78b-47ac-be67-95636986e48d/image.png)
    
    - BasicRatePolicy =ê¸°ë³¸ ì •ì±… (ë³€í•˜ì§€ ì•ŠëŠ” ë¶€ë¶„ â†’ ê·œì¹™ë“¤ì˜ ì§‘í•© )
        - ê·œì¹™ë“¤ì˜ ë¦¬ìŠ¤íŠ¸ë¥¼ í¬í•¨
        - FeeRuleë¥¼ ì»¬ë ‰ì…˜ì„ í¬í•¨
    - ê·œì¹™ë“¤ì€ ì ìš© ì¡°ê±´ê³¼ ë‹¨ìœ„ ìš”ê¸ˆìœ¼ë¡œ êµ¬ì„±
        - FeeRule = ê·œì¹™ì„ êµ¬í˜„í•˜ëŠ” í´ë˜ìŠ¤
            - ë‹¨ìœ„ìš”ê¸ˆ
        - FeeCondition = ì ìš© ì¡°ê±´ì„ êµ¬í˜„í•˜ëŠ” ì¸í„°í˜ì´ìŠ¤ (ë³€í•˜ëŠ” ë¶€ë¶„ì„ ìº¡ìŠí™”í•¨)
            - ì´ë¥¼ êµ¬í˜„í•œ ì„œë¸Œ íƒ€ì…ì¸ ì‹œê°„ëŒ€ë³„ ë°©ì‹, êµ¬ê°„ë³„ ë°©ì‹, ìš”ì¼ë³„ë°©ì‹ ë“±ì´ ìˆìŒ
        - FeeRuleê³¼ FeeConditionëŠ” í•©ì„± ê´€ê³„ì´ë©° ì¶”ìƒ í´ë˜ìŠ¤ì¸ FeeConditionì—ë§Œ ì˜ì¡´í•˜ê³  ìˆìŒ
            - ë³€í•˜ëŠ” FeeCondition ì˜ ì„œë¸Œ íƒ€ì…ì€ FeeRuleë¡œë¶€í„° ìº¡ìŠí™”í•¨

## í˜‘ë ¥ íŒ¨í„´ ì„¤ê³„í•˜ê¸°

- ì¼ë‹¨ ì¶”ìƒí™”ë§Œìœ¼ë¡œ êµ¬ì„±í•œ í˜‘ë ¥ì„ ë³´ì
    - ê·¸ë¦¬ê³  ì¶”í›„ êµ¬ì²´ì ì¸ ì‚¬ë¡€ë¡œ ëŒ€ì²´í•˜ì—¬ ë‹¤ì–‘í•œ ìƒí™©ìœ¼ë¡œ í™•ì¥ì´ ê°€ëŠ¥í•˜ë‹¤.
    
    ![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-12-05 á„‹á…©á„’á…® 8.33.27(2).png](https://prod-files-secure.s3.us-west-2.amazonaws.com/e2c6ccd4-4439-43db-96e9-e654aaf4aa71/277499cb-4861-4e28-8ddd-cc5d2448a366/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2024-12-05_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_8.33.27(2).png)
    
- ì¶”ìƒí™”ë“¤ì´ ì°¸ì—¬í•˜ëŠ” í˜‘ë ¥
    
    ![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-12-05 á„‹á…©á„’á…® 8.33.37(2).png](https://prod-files-secure.s3.us-west-2.amazonaws.com/e2c6ccd4-4439-43db-96e9-e654aaf4aa71/3a955055-2cb3-400e-9e5d-ba97f5d81445/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2024-12-05_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_8.33.37(2).png)
    
    - BasicRatePolicyê°€ calculateFee ë©”ì‹œì§€ë¥¼ ìˆ˜ì‹ í–ˆì„ ë•Œ ì‹œì‘
        - calculateFee() ë©”ì„œë“œëŠ” ì¸ìë¡œ í†µí™” ëª©ë¡ì„ ë¦¬ìŠ¤íŠ¸ í˜•íƒœë¡œ ë°›ì•„ ì „ì²´ ìš”ê¸ˆì„ ê³„ì‚°í•œë‹¤.
    - FeeRuleì€ í•˜ë‚˜ì˜ Callì— ëŒ€í•´ ìš”ê¸ˆì„ ê³„ì‚°í•˜ëŠ” ì±…ì„ ìˆ˜í–‰
        - ì´ë•Œ, ë‹¨ìœ„ ì‹œê°„ë‹¹ ìš”ê¸ˆê³¼ ì ìš© ì¡°ê±´ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì•Œê³  ìˆë‹¤.
        - ì‘ì—… : ê° ê·œì¹™ì˜ ì ìš© ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” êµ¬ê°„ë“¤ë¡œ ë‚˜ëˆ„ê¸° â†’ ì´ë ‡ê²Œ ë¶„ë¦¬ëœ í†µí™” êµ¬ê°„ì— ë‹¨ìœ„ ìš”ê¸ˆì„ ì ìš©í•´ì„œ ìš”ê¸ˆì„ ê³„ì‚°
            - (1) êµ¬ê°„ ë‚˜ëˆ„ê¸°
                - ì‹œê°„ëŒ€ë³„ì¼ ê²½ìš° 1ì›” 1ì¼ 10ì‹œ ~ 1ì›” 3ì¼ 15ì‹œê¹Œì§€ë©´ ì ìš© ê¸°ì¤€ì¸ 00ì‹œ ~19ì‹œ, 19ì‹œ 24ì‹œ ê¸°ì¤€ìœ¼ë¡œ ë‚˜ëˆ„ëŠ” ê²ƒì´ë‹¤. (ìš”ì¼ì— êµ­í•œí•˜ì§€ ì•Šê³  1ì›” 1ì¼, 2ì¼, 3ì¼ì— í•´ë‹¹í•˜ëŠ” 00ì‹œ ~19ì‹œ ë¶€ë¶„ + 19ì‹œ ~24ì‹œ ì— í•´ë‹¹ í•˜ëŠ” ë¶€ë¶„ ì´ë ‡ê²Œ 2ê°€ì§€ ë¶„ë¥˜ë¡œ ë‚˜ëˆˆë‹¤)
            - (2) êµ¬ê°„ì— ëŒ€í•œ ê³„ì‚°
        - ê°ì²´ ì§€í–¥ìŠ¤ëŸ½ê²Œ
            - ì‘ì—…ì€ ê°ì²´ì˜ ì±…ì„ì´ë¯€ë¡œ 2ê°œì˜ ì‘ì—… ì¦‰ ì±…ì„ì„ ê°ì²´ì—ê²Œ í• ë‹¹í•˜ì
                - ê·œì¹™ì˜ ì ìš© ì¡°ê±´ì— ë§ëŠ” êµ¬ê°„ë“¤ë¡œ ë‚˜ëˆ„ëŠ” ì‘ì—…ì€ ì ìš© ì¡°ê±´ì„ ê°€ì¥ ì˜ ì•Œê³  ìˆëŠ” feeConditionì—ê²Œ
                - ë‹¨ìœ„ ìš”ê¸ˆì„ ì ìš©í•´ì„œ ìš”ê¸ˆì„ ê³„ì‚°í•˜ëŠ” ê²ƒì€ ìš”ê¸ˆ ê¸°ì¤€ì˜ ì •ë³´ë¥¼ ì˜ ì•Œê³  ìˆëŠ” FeeRuleì´ ë‹´ë‹¹í•˜ë„ë¡ í•œë‹¤.
            - ì¶”ìƒì ì¸ í˜‘ë ¥
                
                !https://velog.velcdn.com/images/mj3242/post/a83ca075-48f9-4746-aa08-a179ec4d9011/image.png
                
                - ë§Œì•½ ê¸°ê°„ë³„ ë°©ì‹ìœ¼ë¡œ ìš”ê¸ˆì„ ê³„ì‚°í•˜ê³  ì‹¶ë‹¤ë©´Â `TimeOfDayFeeCondition`Â ì¸ìŠ¤í„´ìŠ¤ê°€
                
                `FeeCondition`Â ì˜ ìë¦¬ë¥¼ ëŒ€ì²´í•  ê²ƒì´ë‹¤.
                
            - êµ¬ì²´ì ì¸ í˜‘ë ¥ (ì‹œê°„ëŒ€ë³„ ìš”ê¸ˆê³„ì‚° ë°©ì‹ ì ìš©ì˜ ê²½ã…œ)
                
                !https://velog.velcdn.com/images/mj3242/post/944e849d-faeb-4113-a061-f445f78136bf/image.png
                

## ì¶”ìƒí™” ìˆ˜ì¤€ì—ì„œ í˜‘ë ¥ íŒ¨í„´ êµ¬í˜„í•˜ê¸°

> ì¶”ìƒì ì¸ ìš”ì†Œë“¤ê³¼ ë³€í•˜ì§€ ì•ŠëŠ” ê²ƒë“¤ë¡œë§Œìœ¼ë¡œë„ ì „ì²´ ìš”ê¸ˆ ê³„ì‚° í˜‘ë ¥ êµ¬ì¡°ë¥¼ ì„¤ëª…í•  ìˆ˜ ìˆë‹¤. ë³€í•˜ëŠ” ê²ƒì€ ìº¡ìŠí™”ë˜ì–´ ìˆ¨ê²¨ì ¸ ìˆê¸° ë•Œë¬¸ì— ì „ì²´ì ì¸ í˜‘ë ¥ êµ¬ì¡°ì— ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•ŠëŠ”ë‹¤.
> 
- ì ìš©ì¡°ê±´ì„ í‘œí˜„í•˜ëŠ” ì¶”ìƒí™”ì¸ `FeeCondition`ì—ì„œ ì‹œì‘
    - `FeeCondition`Â ëŠ” í•˜ë‚˜ì˜ ì˜¤ë ˆì´ì…˜ì„ í¬í•¨í•˜ëŠ” ê°„ë‹¨í•œ ì¸í„°í˜ì´ìŠ¤
        
        ```java
        public interface FeeCondition{
        // ì ìš© ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” í†µí™” ê¸°ê°„ë“¤ì„ êµ¬í•˜ì—¬ ë°˜í™˜ 
        	List<DateTimeInterval> findTimeIntervals(Call call);
        }
        ```
        
- FeeRule
    - feeConditionì—ê²Œ ì‹œê°„ ëª©ë¡ì„ ë°˜í™˜ë°›ì•„ ìš”ê¸ˆì„ ê³„ì‚°
    
    ```java
    public class FeeRule {
    		// ì ìš© ì¡°ê±´
        private FeeCondition feeCondition;
    	   // ë‹¨ìœ„ ìš”ê¸ˆ
        private FeePerDuration feePerDuration;
    
        public FeeRule(FeeCondition feeCondition, FeePerDuration feePerDuration) {
            this.feeCondition = feeCondition;
            this.feePerDuration = feePerDuration;
        }
    
        public Money calculateFee(Call call) {
            return feeCondition.findTimeIntervals(call)
                    .stream()
                    .map(each -> feePerDuration.calculate(each))
                    .reduce(Money.ZERO, (first, second) -> first.plus(second));
        }
    }
    ```
    
- FeePerDuration
    - ë‹¨ìœ„ ì‹œê°„ë‹¹ ìš”ê¸ˆì„ í‘œí˜„
    - ìš”ê¸ˆì„ ê³„ì‚°í•œë‹¤.
    
    ```java
    public class FeePerDuration {
        private Money fee;
        private Duration duration;
    
        public FeePerDuration(Money fee, Duration duration) {
            this.fee = fee;
            this.duration = duration;
        }
    
        public Money calculate(DateTimeInterval interval) {
            return fee.times(Math.ceil((double)interval.duration().toNanos() / duration.toNanos()));
        }
    }
    ```
    
- BasicRatePolicy
    
    ```java
    public final class BasicRatePolicy implements RatePolicy {
        private List<FeeRule> feeRules = new ArrayList<>();
    
        public BasicRatePolicy(FeeRule ... feeRules) {
            this.feeRules = Arrays.asList(feeRules);
        }
    
        @Override
        public Money calculateFee(Phone phone) {
            return phone.getCalls()
                    .stream()
                    .map(call -> calculate(call))
                    .reduce(Money.ZERO, (first, second) -> first.plus(second));
        }
    
    // ì „ì²´ ìš”ê¸ˆ ê³„ì‚° ì¶”ê°€ 
        private Money calculate(Call call) {
            return feeRules
                    .stream()
                    .map(rule -> rule.calculateFee(call))
                    .reduce(Money.ZERO, (first, second) -> first.plus(second));
        }
    }
    ```
    

## êµ¬ì²´ì ì¸ í˜‘ë ¥ êµ¬í˜„í•˜ê¸°

- ì¶”ìƒì ì¸ ìˆ˜ì¤€ì˜ í˜‘ë ¥ì„ ì™„ì„±í•œ ê²ƒì„ ê¸°ë°˜ìœ¼ë¡œ í˜‘ë ¥ì´ ë™ì‘í•˜ë„ë¡ êµ¬ì²´ì ì¸ ì»¨í…ìŠ¤íŠ¸ë¡œ í™•ì¥í•´ì•¼í•œë‹¤.
- í˜„ì¬ì˜ ìš”ê¸ˆì œê°€ ì–´ë–¤ ì •ì±…ì¸ì§€ ê²°ì •í•˜ëŠ” ê¸°ì¤€ì€Â `FeeCondition`Â ì„ ëŒ€ì²´í•˜ëŠ” ê°ì²´ì˜ íƒ€ì…ì´ ë¬´ì—‡ì¸ê°€ì— ë‹¬ë ¤ìˆë‹¤.
    - `FeeCondition`Â ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‹¤ì²´í™”í•˜ëŠ” í´ë˜ìŠ¤ì— ë”°ë¼ ê¸°ë³¸ ì •ì±…ì˜ ì¢…ë¥˜ê°€ ë‹¬ë¼ì§„ë‹¤.
- **ì‹œê°„ëŒ€ë³„ ì •ì±…**
    - ì‹œê°„ëŒ€ë³„ ì •ì±…ì˜ ì ìš©ì¡°ê±´ì€ â€œì‹œì‘ì‹œê°„ë¶€í„° ì¢…ë£Œì‹œê°„ê¹Œì§€â€ ì´ê¸° ë•Œë¬¸ì— ì‹œì‘ì‹œê°„ê³¼ ì¢…ë£Œì‹œê°„ì„ ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ë¡œ í¬í•¨í•œë‹¤.
        
        ```java
        public class TimeOfDayFeeCondition implements FeeCondition {
            private LocalTime from;
            private LocalTime to;
        
            public TimeOfDayFeeCondition(LocalTime from, LocalTime to) {
                this.from = from;
                this.to = to;
            }
        
            @Override
            public List<DateTimeInterval> findTimeIntervals(Call call) {
                return call.getInterval().splitByDay()
                        .stream()
                        .map(each ->
                                DateTimeInterval.of(
                                        LocalDateTime.of(each.getFrom().toLocalDate(), from(each)),
                                        LocalDateTime.of(each.getTo().toLocalDate(), to(each))))
                        .collect(Collectors.toList());
            }
        
            private LocalTime from(DateTimeInterval interval) {
                return interval.getFrom().toLocalTime().isBefore(from) ?
                        from : interval.getFrom().toLocalTime();
            }
        
            private LocalTime to(DateTimeInterval interval) {
                return interval.getTo().toLocalTime().isAfter(to) ?
                        to : interval.getTo().toLocalTime();
            }
        }
        ```
        
- **ìš”ì¼ë³„ ì •ì±…**
    - ì´ ì •ì±…ì€ ì—¬ëŸ¬ ìš”ì¼ì„ í•˜ë‚˜ì˜ ë‹¨ìœ„ë¡œ ê´€ë¦¬í•  ìˆ˜ ìˆê²ŒÂ `DayOfWeek`Â ì»¬ë ‰ì…˜ì„ ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ë¡œ í¬í•¨í•˜ë©°
    
    ```java
    public class DayOfWeekFeeCondition implements FeeCondition {
        private List<DayOfWeek> dayOfWeeks = new ArrayList<>();
    
        public DayOfWeekFeeCondition(DayOfWeek... dayOfWeeks) {
            this.dayOfWeeks = Arrays.asList(dayOfWeeks);
        }
    
    //findTimeIntervalsÂ ë©”ì„œë“œëŠ”Â CallÂ ì˜ ê¸°ê°„ ì¤‘ì—ì„œ ìš”ì¼ì— í•´ë‹¹í•˜ëŠ” ê¸°ê°„ë§Œì„ ì¶”ì¶œí•´ ë°˜í™˜
        @Override
        public List<DateTimeInterval> findTimeIntervals(Call call) {
            return call.getInterval()
                    .splitByDay()
                    .stream()
                    .filter(each -> dayOfWeeks.contains(each.getFrom().getDayOfWeek()))
                    .collect(Collectors.toList());
        }
    }
    ```
    

- **êµ¬ê°„ë³„ ì •ì±…**
    - ì²˜ìŒ ì„¤ê³„ì—ì„œ ìƒˆ ê¸°ë³¸ ì •ì±…ì„ ì¶”ê°€ë¥¼ ìœ„í•œ ì§€ì¹¨ì´ ì—†ì—ˆê¸° ë•Œë¬¸ì— í˜‘ë ¥ì˜ ì¼ê´€ì„±ì„ ìœ ì§€í•˜ì§€ ëª»í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ìƒˆ ì •ì±…ì„ êµ¬í˜„í•  ìˆ˜ ìˆì—ˆë‹¤.
    - í•˜ì§€ë§ŒÂ `FeeCondition`Â ì´ë¼ëŠ” ì¸í„°í˜ì´ìŠ¤ë¥¼ í†µí•´ í˜‘ë ¥ì„ ì¼ê´€ì„± ìˆê²Œ ë§Œë“¤ì—ˆë‹¤.
        - ë‹¨ìˆœíˆ ìƒˆ ì •ì±… ì¶”ê°€í•˜ê¸° ìœ„í•´ â€œì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ëŠ” êµ¬ì²´ í´ë˜ìŠ¤ë¥¼ ì¶”ê°€í•œ í›„ ë©”ì„œë“œ ì˜¤ë²„ë¼ì´ë”©í•˜ë©´ ëœë‹¤â€ë¼ëŠ” ì¼ê´€ì„±ì´ ìƒê¹€
        
        ```java
        public class DurationFeeCondition implements FeeCondition {
            private Duration from;
            private Duration to;
        
            public DurationFeeCondition(Duration from, Duration to) {
                this.from = from;
                this.to = to;
            }
        
            @Override
            public List<DateTimeInterval> findTimeIntervals(Call call) {
                if (call.getInterval().duration().compareTo(from) < 0) {
                    return Collections.emptyList();
                }
        
                return Arrays.asList(DateTimeInterval.of(
                        call.getInterval().getFrom().plus(from),
                        call.getInterval().duration().compareTo(to) > 0 ?
                                call.getInterval().getFrom().plus(to) :
                                call.getInterval().getTo()));
            }
        }
        ```
        
- ë³€í•˜ì§€ ì•ŠëŠ” ë¶€ë¶„ê³¼ ë³€í•˜ëŠ” ë¶€ë¶„ ë¶„ë¦¬
    - â†’ ë³€í•˜ì§€ ì•ŠëŠ” ë¶€ë¶„ì„ ì¬ì‚¬ìš© ê°€ëŠ¥
    - â†’ ìƒˆë¡œìš´ ê¸°ëŠ¥ ì¶”ê°€ ì‰¬ì›Œì§ (ë‹¨ìˆœ ë³€í•˜ëŠ” ë¶€ë¶„ë§Œ êµ¬í˜„í•˜ê¸°)
    - â†’ ì¼ê´€ì„±
- ì¼ê´€ì„± ìˆëŠ” í˜‘ë ¥ì€ ê°œë°œìì—ê²Œ í™•ì¥ í¬ì¸íŠ¸ë¥¼ ê°•ì œí•˜ê¸° ë•Œë¬¸ì— ì •í•´ì§„ êµ¬ì¡°ë¥¼ ìš°íšŒí•˜ê¸° ì–´ë µê²Œ ë§Œë“ ë‹¤.
    - ê°œë°œìëŠ” ì£¼ì–´ì§„ ì œì•½ì— ë¨¸ë¬¼ëŸ¬ì•¼ í•˜ì§€ë§Œ ì‘ì€ ë¬¸ì œì— ì§‘ì¤‘í•  ìˆ˜ ìˆë‹¤.
        - ê·¸ë¦¬ê³  ì´ ì‘ì€ ë¬¸ì œì— ëŒ€í•œ í•´ê²°ì±…ì„ ì „ì²´ ë¬¸ë§¥ì— ì—°ê²°í•´ í˜‘ë ¥ì„ í™•ì¥í•˜ê³  êµ¬ì²´í™”í•  ìˆ˜ ìˆë‹¤.
- ìœ ì‚¬í•œ ê¸°ëŠ¥ì— ëŒ€í•´ ìœ ì‚¬í•œ í˜‘ë ¥ íŒ¨í„´ì„ ì ìš©í•˜ëŠ” ê²ƒì€ ê°ì²´ì§€í–¥ ì‹œìŠ¤í…œì—ì„œÂ ê°œë…ì  ë¬´ê²°ì„±ì„ ìœ ì§€í•  ìˆ˜ ìˆëŠ” ê°€ì¥ íš¨ê³¼ì ì¸ ë°©ë²•ì´ë‹¤. ì´ ê°œë…ì€ ì¼ê´€ì„±ê³¼ ê°™ì€ ê°œë…ìœ¼ë¡œ ë³¼ ìˆ˜ ìˆë‹¤.

## í˜‘ë ¥ íŒ¨í„´ì— ë§ì¶”ê¸°

- ê³ ì •ìš”ê¸ˆ ì •ì±…ì€ ì•ì„  ì •ì±…ë“¤ê³¼ ë‹¬ë¦¬ â€˜ê·œì¹™â€™ì´ë¼ëŠ” ê°œë…ì˜ í•„ìš” ì—†ì´ â€˜ë‹¨ìœ„ìš”ê¸ˆâ€™ ì •ë³´ë§Œ ìˆìœ¼ë©´ ì¶©ë¶„í•˜ë‹¤.
    - ë‹¤ë¥¸ ë°©ì‹ìœ¼ë¡œ êµ¬í˜„í•  ìˆ˜ë„ ìˆì§€ë§Œ ì´ëŸ° ê²½ìš° ê°€ê¸‰ì  ê¸°ì¡´ì˜ í˜‘ë ¥ íŒ¨í„´ì— ë§ì¶”ëŠ” ê²ƒì´ ê°€ì¥ ì¢‹ì€ ë°©ë²•ì´ë‹¤.
- **ê³ ì • ìš”ê¸ˆ ì •ì±…**
    - ê³ ì •ìš”ê¸ˆ ë°©ì‹ì˜ FeeCondition ì¶”ê°€
    
    ```java
    public class FixedFeeCondition implements FeeCondition {
    
    // Callì˜ ì „ì²´ í†µí™” ì‹œê°„ ë°˜í™˜
        @Override
        public List<DateTimeInterval> findTimeIntervals(Call call) {
            return Arrays.asList(call.getInterval());
        }
    }
    ```
    
    - ì¡°ê¸ˆ ì´ìƒí•œ êµ¬ì¡°ë¥¼ ë‚³ë”ë¼ë„ ì „ì²´ ì¼ê´€ì„±ì„ ìœ ì§€í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•˜ë‹¤.
        - ê°œë…ì ìœ¼ë¡œëŠ” ë¶ˆí•„ìš”í•œ FixedFeeCondition í´ë˜ìŠ¤ë¥¼ ì¶”ê°€, í•­ìƒ 1ê°œë§Œ ê³„ì‚°í• í…ë° Listí˜•ì‹ìœ¼ë¡œ ë°˜í™˜
        - í•˜ì§€ë§Œ ê°œë…ì  ë¬´ê²°ì„±ì„ ì§€í‚¤ëŠ” ë°©í–¥ì´ ë” ì¢‹ìŒ

## íŒ¨í„´ì„ ì°¾ì•„ë¼

- ì¼ê´€ì„± ìˆëŠ” í˜‘ë ¥ì˜ í•µì‹¬
    - â€œë³€ê²½ì„ ë¶„ë¦¬í•˜ê³  ìº¡ìŠí™”í•˜ëŠ” ê²ƒâ€
- ê°œë°œí•˜ë‹¤ê°€ ìœ ì‚¬í•œ ê¸°ëŠ¥ì— ëŒ€í•œ ë³€ê²½ì´ ì§€ì†ì ìœ¼ë¡œ ë°œìƒí•  ê²½ìš° â†’ ë³€ê²½ì„ ìº¡ìŠí™”í•  ìˆ˜ ìˆëŠ” ì ì ˆí•œ ì¶”ìƒí™”ë¥¼ ì°¾ì€ í›„ â†’ ì´ ì¶”ìƒí™”ì— ë³€í•˜ì§€ ì•ŠëŠ” ê³µí†µì ì¸ ì±…ì„ì„ í• ë‹¹í•˜ë¼
    - ìº¡ìŠí™”í•˜ê¸°ì— ì í•©í•˜ì§€ ì•Šë‹¤ë©´ ì½”ë“œë¥¼ ìˆ˜ì •í•˜ì§€ ì•Šê³ ë„ ì›í•˜ëŠ” ë³€ê²½ì„ ìˆ˜ìš©í•  ìˆ˜ ìˆë„ë¡ ë¦¬íŒ©í„°ë§í•˜ë¼! (ì•ˆë˜ë©´ ë˜ê²Œ í•˜ë¼!)
        - **ë³€ê²½ì„ ìˆ˜ìš©í•  ìˆ˜ ìˆëŠ” ì ì ˆí•œ ì±…ì„**ì„ ì°¾ë‹¤ë³´ë©´ í˜‘ë ¥ì˜ ì¼ê´€ì„±ì´ ì„œì„œíˆ ìœ¤ê³½ì„ ë“œëŸ¬ë‚¼ ê²ƒì´ë‹¤.
- í˜‘ë ¥ì„ ì¼ê´€ì„±ìˆê²Œ ë§Œë“œëŠ” ê²ƒ == ìœ ì‚¬í•œ ë³€ê²½ì„ ìˆ˜ìš©í•  ìˆ˜ ìˆëŠ” í˜‘ë ¥ íŒ¨í„´ì„ ë°œê²¬í•˜ëŠ” ê²ƒ
